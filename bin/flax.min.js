PTM_RATIO=32;RADIAN_TO_DEGREE=180/Math.PI;DEGREE_TO_RADIAN=Math.PI/180;IMAGE_TYPES=[".png",".jpg",".bmp",".jpeg",".gif"];SOUND_TYPES=[".mp3",".ogg",".wav",".mp4",".m4a"];DEFAULT_SOUNDS_FOLDER="res/music/";H_ALIGHS=["left","center","right"];var d=d||{lj:0,km:1,lm:2,mm:3,nm:4,om:5},r=r||{};window.flax=r;r.version=1.81;r.ll=2;r.language=null;r.ce=-1;r.Vc="en zh de fr it es tr pt ru".split(" ");r.Tf=!1;r.si="unknown";r.h=null;r.Q=null;r.gf="";r.I=null;r.Mn=null;r.ic=1/60;r.hh={};r.Fc=!0;r.Xb=!1;
r.ra=null;r.Qe=null;r.tb=null;r.Be=function(a){return cc.i.K||"string"!=typeof a||r.Pf(a)||-1<a.indexOf("?v\x3d")?a:a+"?v\x3d"+cc.k.j.version};r.gh=function(a){if(cc.i.K||"string"!=typeof a||r.Pf(a))return a;var b=a.indexOf("?v\x3d");-1<b&&(a=a.substr(0,b));return a};r.fl=function(){if(cc.i.K)return!0;var a=document.domain,b=cc.k.j.$n;return r.ai()||null==b||0==b.length||-1<b.indexOf(a)};r.ai=function(){if(cc.i.K)return!1;var a=document.domain;return"localhost"==a||0==a.indexOf("192.168.")};
if(!cc.i.K&&(r.ai()&&(cc.k.j.version=1+Math.floor(999998*Math.random())),setTimeout(function(){var a=document.body.style.backgroundColor;document.getElementById(cc.k.j.id).style.backgroundColor=a;a=a.replace("rgb(","");a=a.replace(")","");a=a.split(",");r.bgColor=cc.color(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]))},0.01),cc.i.gl)){var s=function(){document.body.scrollTop=0};window.addEventListener("onorientationchange"in window?"orientationchange":"resize",s,!0);s()}
r.Eb=function(a,b){if(!r.Xb){r.Xb=!0;cc.log("Flax inited, version: "+r.version);null==a&&(a=cc.Sm.SHOW_ALL);r.Hh&&r.Hh(b);r.pj();var c=cc.k.j.width,e=cc.k.j.height;if(cc.i.K)cc.view.Jl(c,e,a);else{var f=document.getElementById(cc.k.j.id);f.width=c=c||f.width;f.height=e=e||f.height;cc.view.zn(!0);cc.view.Jl(c,e,a);cc.view.xp(!0)}r.ic=1/cc.k.j.sf;r.h=r.pe.create();c=cc.k.j.language;null==c||""==c?null==r.language&&(c=cc.i.language,r.Ri(c)):r.Ri(c)}};
r.Hk=function(a){if(null==r.Qe)return cc.log("Warning: there is no language defined: "+r.language),null;var b=r.Qe[a];null==b&&cc.log("Warning: there is no language string for key: "+a);return b};r.Ri=function(a){null!=a&&""!=a&&a!=r.language&&(r.language=a,cc.k.j.Vc&&cc.k.j.Vc.length&&(r.Vc=cc.k.j.Vc),r.ce=r.Vc.indexOf(a),-1==r.ce&&cc.log("Invalid language: "+a),cc.k.j.Mo&&(r.tb=r.Vg(a)))};r.Vg=function(a){return"res/locale/"+(a||r.language)+".json"};
r.xh=function(a){var b=r.cj;if(null==b)throw"Module can not be null!";for(var c in b)"onEnter"===c?(void 0===a.prototype.sc?a.prototype.sc=0:a.prototype.sc++,a.prototype["__onEnter"+a.prototype.sc]=b.ca):"onExit"===c?(void 0===a.prototype.tc?a.prototype.tc=0:a.prototype.tc++,a.prototype["__onExit"+a.prototype.tc]=b.Ua):a.prototype[c]||(a.prototype[c]=b[c])};r.lk=function(a){if(void 0!==a.sc)for(var b=a.sc;0<=b;)a["__onEnter"+b](),b--};
r.mk=function(a){if(void 0!==a.tc)for(var b=a.tc;0<=b;)a["__onExit"+b](),b--};r.pj=function(){if(!cc.i.K){var a=navigator.userAgent,b;a.match(/iPad/i)||a.match(/iPhone/i)?(b=a.indexOf("OS "),cc.i.pl=cc.i.Hm,-1<b&&(r.si=a.substr(b+3,3).replace("_","."))):a.match(/Android/i)&&(b=a.indexOf("Android "),cc.i.pl=cc.i.Gm,-1<b&&(r.si=a.substr(b+8,3)))}};r.qp=function(a,b,c){c||(c=[]);c instanceof Array||(c=[c]);r.hh[a]={Hl:b,Wa:c}};
r.zl=function(){var a=r.gf;if(r.fl()){var b=r.hh[a];if(null==b)throw"Please register the scene: "+a+" firstly!";r.tb&&-1==b.Wa.indexOf(r.tb)&&b.Wa.push(r.tb);if(r.ab)for(var c in r.ab)b.Wa.push({type:"font",name:c,Zp:r.ab[c]});r.L&&r.L.Fa();r.Ya&&r.Ya.Fa();cc.Ra.Bl();r.gf=a;r.mg&&r.mg();r.Q&&r.Q.da();r.rl(b.Wa,function(){if(r.tb){r.Qe=cc.V.$d(r.Vg());var a=b.Wa.indexOf(r.tb);-1<a&&b.Wa.splice(a,1);r.tb=null}if(r.ab){for(a=b.Wa.length;a--;)"object"==typeof b.Wa[a]&&b.Wa.splice(a,1);r.ab=null}r.I=new b.Hl;
cc.Ra.Fl(r.I);r.Q=new r.ej;r.I.o(r.Q,999999);r.oj()})}};r.lp=function(){r.gf&&r.zl()};r.mh={};
r.rl=function(a,b){if(null!=a&&0!=a.length){for(var c=!1,e=[],f=a.length;f--;){var g=a[f];if(null==g)throw"There is a null resource!";if(null==cc.V.$d(g)&&null==r.mh[g])if("string"!=typeof g||".flax"!=cc.path.pf(g)||!cc.i.K&&!1!==cc.k.j.nq)c=!0,e.unshift(r.Be(g));else{cc.i.K&&cc.log("***Warning: .flax is not support JSB for now, use .plist + .png insteadly!");var h=cc.path.zb(g,".plist"),g=cc.path.zb(g,".png");null==cc.V.$d(g)&&(e.unshift(r.Be(h)),e.unshift(r.Be(g)),c=!0)}}if(c){c=r.Wc(cc.k.j.ip||
"flax.Preloader");c=new c;c.dl(e,function(){if(!cc.i.K)for(var a=e.length;a--;){var c=e[a];r.Pf(c)&&(r.mh[c]="loaded");var f=cc.V.$d(c);if(f){var g=r.gh(c);cc.V.Kd[g]=f;r.Nf(g)&&cc.i.Nn.Yo&&cc.am.$k(g);cc.V.Fa(c)}}b()});cc.Ra.Fl(c);return}}b()};r.Rp=function(a){if(r.Fc!=a){r.Fc=a;var b=cc.bf;a?(b.zp(),r.zd&&(r.wi(r.zd,!0),r.zd=null)):b.Yl()}};r.xo=function(){return r.Fc};r.zd=null;r.wi=function(a,b){var c=cc.bf;r.Fc?c.wi(a,b):r.zd=a};r.dq=function(){};r.$o=function(){};r.vi=function(a){if(r.Fc)return cc.bf.vi(a)};
r.Zl=function(a){var b=cc.bf;null!=a?b.Zl(a):b.Yl()};r.gp=function(a){return r.vi(a)};r.oj=function(){if(!cc.i.K){if(!r.ra&&cc.i.gl&&cc.k.j.Dl){r.ra=cc.hj.create(r.bgColor,cc.ga.width+10,cc.ga.height+10);var a=cc.ya.create(cc.k.j.Dl);a.n(cc.ga.center);r.ra.mj=a;r.ra.o(a);window.addEventListener("onorientationchange"in window?"orientationchange":"resize",r.lh,!0);r.lh()}r.ra&&(r.ra.da(),r.I.o(r.ra,1E6))}};r.dh=!1;
r.lh=function(){var a=90==Math.abs(window.orientation);r.ra.visible=cc.k.j.Tf!=a;r.ra.mj.rotation=a?-90:0;document.body.scrollTop=0;r.ra.visible?(r.Tf!=a&&(r.dh=cc.Ra.Ko()),cc.Ra.pause()):r.dh||cc.Ra.Bl();r.Q.enabled=!r.ra.visible;r.Tf=a};r.vf=function(a,b){return r.Jh(b.x-a.x,b.y-a.y,void 0)};r.Jh=function(a,b,c){void 0===c&&(c=!0);a=Math.atan2(a,b);0>a&&(a+=2*Math.PI);c&&(a*=RADIAN_TO_DEGREE);return a};
r.Df=function(a,b,c){c=(90-c)*DEGREE_TO_RADIAN;null==a&&(a=cc.a());return cc.ag(a,cc.a(b*Math.cos(c),b*Math.sin(c)))};r.A=function(a,b){var c=a.A();!0===b&&a.parent&&(c=a.parent.ua(c));return c};r.Ef=function(a){for(var b=0;a;)b+=a.rotation,a=a.parent;return b};r.Ff=function(a,b){if(!0!==b)return cc.a(a.Ga,a.Ha);for(var c=1,e=1,f=a;f;)c*=f.Ga,e*=f.Ha,f=f.parent;return cc.a(c,e)};
r.B=function(a,b){var c;if(a.B)return c=a.B(b);if(a instanceof cc.gj||a instanceof cc.yg)return cc.rect(0,0,cc.ga.width,cc.ga.height);b=!1!==b;c=a.A();a.parent&&(b?c=a.parent.ua(c):(c=a.Bk(),c=r.I.gb(c)));var e=a.Nc(),f=a.Ak();return c=cc.rect(c.x-e.width*f.x,c.y-e.height*f.y,e.width,e.height)};r.be=function(a,b){if(null==a||!(a instanceof cc.ha))return!1;if(a.mainCollider)return a.mainCollider.Dh(b);var c=a.gb(b),e=r.B(a,!1);return cc.zi(e,c)};r.Eo=function(a,b){return a.mainCollider.ef(b.mainCollider)};
r.$h=function(a){return a instanceof r.pb||a instanceof r.Ob||a instanceof r.dj};r.Fb=function(a){return a instanceof r.pb||a instanceof r.Ob};r.Jo=function(a){return a instanceof r.Ia||a instanceof r.kd};r.el=function(a){return a instanceof r.dd||a instanceof r.md};r.Mf=function(a,b){if(null==a||null==b||a==b)return!1;for(var c=a.parent;c;){if(c==b)return!0;c=c.parent}return!1};r.jo=function(a,b){for(var c=a;c;){if(c instanceof b)return c;c=c.parent}return null};
r.wk=function(a,b){for(var c=a.children,e=c.length,f;e--;)if(f=c[e],f instanceof b||(f=r.wk(f,b)))return f;return null};r.zo=function(){var a={};if(cc.i.K)return a;for(var b=window.location.search.substring(1).split("\x26"),c=0;c<b.length;c++){var e=b[c].split("\x3d");a[e[0]]=decodeURIComponent(e[1])}return a};r.Wc=function(a){var b;if(void 0==a||""==a)return null;a=a.split(".");for(var c=window||this,e=0,f=a.length;e<f;e++)try{c=c[a[e]]}catch(g){break}return typeof c!==(b||"function")?null:c};
r.Un=function(a,b){null==b&&(b=cc.color(255,255,255,255));var c=cc.hj.create(b,cc.ga.width,cc.ga.height);a.o(c,0);return c};r.Xp=function(a,b){if(void 0===b||0>=b||b>a.length)b=a.length;for(var c=b-1;0<=c;c--){var e=0|cc.kp()%(c+1),f=a[c];a[c]=a[e];a[e]=f}};r.yp=function(a,b,c){a=Math.max(b,a);return a=Math.min(c,a)};r.ml=function(a){return 0==a?0:0<a?1:-1};r.cg=function(a,b){return a+Math.floor(Math.random()*(b-a))};r.Nk=function(a){return null==a?null:a[r.cg(0,a.length)]};
r.Nf=function(a){if("string"!=typeof a)return!1;a=cc.path.pf(a);return-1<IMAGE_TYPES.indexOf(a)};r.Pf=function(a){if("string"!=typeof a)return!1;a=cc.path.pf(a);return-1<SOUND_TYPES.indexOf(a)};r.Nd=function(a,b){if(null!=a&&null!=b)for(var c in a)try{b[c]=a[c]}catch(e){}};r.pk=function(a){var b;isNaN(b)&&(b=0);for(var c=[],e=-1,f=b-1;++e<a;)0==e%2?c.push(++f):c.push(--b);return c};r.Yh="http://flax.so";r.Vk=function(){var a=cc.k.j.Yh||r.Yh;!cc.i.K&&a&&window.open(a)};function z(){this.Ka=[];var a=this;this.J=function(){z.prototype.J.apply(a,arguments)}}z.prototype={jh:!0,wh:!0,J:function(a){if(this.wh){var b=Array.prototype.slice.call(arguments),c=this.Ka.length,e;if(c){e=this.Ka.slice();this.jh=!0;do c--;while(e[c]&&this.jh&&!1!==e[c].execute(b))}}},toString:function(){return"[Signal active:"+this.wh+" numListeners:"+this.Ka.length+"]"}};function C(a){for(var b=a.Ka.length;b--;)a.Ka[b].on();a.Ka.length=0}var D=z;D.W=z;(function(a){"function"===typeof define&&define.Bn?define(function(){return D}):"undefined"!==typeof module&&module.vk?module.vk=D:a.signals=D})(this);r.Qn=function(){r.Z&&r.Z.clear()};r.uk=function(a,b,c,e){r.td();null==c&&(c=1);null==e&&(e=cc.color(255,0,0,255));r.Z.Rd(a,b,c,e)};r.bo=function(a,b,c,e,f){r.uk(a,r.Df(a,c,b),e,f)};r.of=function(a,b,c,e){r.td();null==b&&(b=1);null==c&&cc.color(255,0,0,255);c=cc.ag(cc.a(a.x,a.y),cc.a(a.width,a.height));r.Z.of(cc.a(a.x,a.y),c,e,b)};r.Gh=function(a,b){r.td();r.Z.Gh(a,b)};r.tk=function(a,b,c){r.td();null==b&&(b=3);null==c&&(c=cc.color(255,0,0,255));r.Z.tk(a,b,c)};
r.td=function(){null==r.Z&&(r.Z=cc.sg.create());r.I&&(r.Z.parent&&r.Z.parent!=r.I&&(r.Z.da(),r.Z.clear()),null==r.Z.parent&&r.I.o(r.Z,99999))};r.ej=cc.ha.extend({enabled:!0,Lf:!1,Kf:!1,di:!1,Rf:0,vb:[],qb:{},bb:{},Oe:!1,U:function(){cc.ha.prototype.U.call(this);this.vb=[];this.Lf=!1;this.qb={};this.bb={};this.Oe=!1},ca:function(){this.l();var a=this,b=cc.Nb.create({event:cc.Nb.Cg,Pi:!1,ri:function(b,e){if(!a.enabled)return!1;a.Kf=!1;a.di=!1;a.Rf=0;a.Lf=!0;a.xc(a,b,e,"onPress");return!0},nl:function(b,e){a.Kf=!1;a.Lf=!1;a.xc(a,b,e,"onUp");a.xc(a,b,e,"onClick")},ol:function(b,e){a.Kf=!0;a.di=!0;a.Rf+=cc.Yc(cc.a(),b.Dk());a.xc(a,b,e,"onMouseMove")}});
cc.Sd.addListener(b,this)},Ua:function(){this.l();cc.Sd.up()},wn:function(a){-1<this.vb.indexOf(a)||(this.vb.push(a),a.pd=!0)},vl:function(a){var b=this.vb.indexOf(a);-1<b&&(this.vb.splice(b,1),a.pd=!1)},qj:function(a,b){if(!a.parent||!b.parent)return 1;if(a.parent==b.parent)return this.Mg(a,b);for(var c=null,e=0,f=[],g=a.parent;g;)f.push(g),g=g.parent;for(var h=[],g=b.parent;g;){e=f.indexOf(g);if(-1<e){c=g;break}h.push(g);g=g.parent}f=f.slice(0,e);return this.Mg(f[f.length-1]||a,h[h.length-1]||b,
c)?1:-1},Mg:function(a,b,c){null==c&&(c=a.parent);return c.children.indexOf(a)>c.children.indexOf(b)},addListener:function(a,b,c,e){if(null==b)throw"Event callback can not be null!";var f="onKeyPress"==c||"onKeyUp"==c;null==a&&(a=this,f||cc.log("Listening target is null, make sure you want to listen to the full screen input!"));if(f){f=this.bb[c];null==f&&(f=[],this.bb[c]=f);for(var g=f.length;g--;)if(f[g].Cb==b)return;f.push({Cb:b,ff:e||a});this.Oe||this.rj()}else{c=null==c?"onClick":c;null==a.za&&
(a.za=ClassManager.Qh());f=this.qb[a.za];null==f&&(f=[],this.qb[a.za]=f,a!=this&&this.sj(a,!0));for(g=f.length;g--;)if(f[g].type==c&&f[g].Cb==b)return;f.push({type:c,Cb:b,ff:e||a})}},removeListener:function(a,b,c){null==a&&(a=this);var e=this.qb[a.za];if(e&&(null==c||"onKeyPress"!=c&&"onKeyUp"!=c)){var f=null,g=e.length;if(b||c)for(;g--;)f=e[g],(c&&f.type==c||b&&f.Cb==b)&&e.splice(g,1);0!=e.length&&(b||c)||delete this.qb[a.za]}if(b&&(null==c||"onKeyPress"==c||"onKeyUp"==c)&&(null==c?(e=this.bb.onKeyPress||
[],e=e.concat(this.bb.onKeyUp||[])):e=this.bb[c],e&&e.length))for(g=e.length;g--;)f=e[g],f.Cb==b&&e.splice(g,1)},vp:function(){this.qb={}},tp:function(){this.bb={}},al:function(a,b){if(!this.enabled)return!1;var c=b.Lh();if(this.Me(c,a))return!1;var e=a.Oc();if(!this.Bj(c,e))return!1;b.currentTarget=c;b.target=this.vd(c,e)||c;if((c instanceof cc.gj||c instanceof r.Ia)&&b.target==c)return!1;this.ud(c,a,b,"onPress");return!0},Xh:function(a,b){var c=b.Lh();b.currentTarget=c;b.target=this.vd(c,a.Oc())||
c;this.ud(c,a,b,"onUp");r.be(c,a.Oc())&&this.ud(c,a,b,"onClick")},bl:function(a,b){var c=b.Lh();this.ud(c,a,b,"onMouseMove")},sj:function(a,b){var c=this,e=cc.Nb.create({event:cc.Nb.Cg,Pi:b,ri:function(a,b){return c.al(a,b)},nl:function(a,b){c.Xh(a,b)},ol:function(a,b){c.bl(a,b)},Xo:function(a,b){c.Xh(a,b)}});cc.Sd.addListener(e,a)},rj:function(){var a=this;cc.Sd.addListener({event:cc.Nb.Am,Uo:function(b){a.Qg(b,"onKeyPress")},Vo:function(b){a.Qg(b,"onKeyUp")}},this);this.Oe=!0},Bj:function(a,b){for(var c=
this.vb.length,e=null,e=null;c--;)if(e=this.vb[c],a!=e&&!r.Mf(a,e)&&!r.Mf(e,a)&&!this.Me(e)&&1==this.qj(e,a)&&(e=this.vd(e,b)))return!1;return!0},vd:function(a,b){a instanceof Array||(a=[a]);for(var c=null,e=a.length;e--;)if(c=a[e],!this.Me(c)){if(0<c.children.length&&(this.rh=this.vd(c.children,b)))return this.rh;if(r.be(c,b))return c}return null},Me:function(a,b){return null==a||!(a instanceof cc.yg||a.parent)||!this.Cj(a)||a.Uc&&!1===a.Uc()||b&&!r.be(a,b.Oc())?!0:!1},Cj:function(a){for(;a;){if(!a.visible)return!1;
a=a.parent}return!0},ud:function(a,b,c,e){for(var f=[];a;)f.push(a),a=a.parent;for(var g=0;g<f.length;g++)a=f[g],this.xc(a,b,c,e)},xc:function(a,b,c,e){var f=this.qb[a.za];if(f&&f.length){c.currentTarget=a;a=null;for(var g=[],h=f.length;h--;)a=f[h],a.type==e&&g.push(a);for(h=g.length;h--;)a=g[h],a.Cb.apply(a.ff,[b,c])}},Qg:function(a,b){var c=this.bb[b];if(c&&c.length){for(var e=this.yj(a),f=null,g=[],h=c.length;h--;)f=c[h],g.push(f);for(h=g.length;h--;)f=g[h],f.Cb.apply(f.ff,[e])}},yj:function(a){var b=
Object.getOwnPropertyNames(cc.fj),c="",e;for(e in b)if(cc.fj[b[e]]==a){c=b[e];break}return c}});/*
 zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
(function(){function a(a,b){var c=a.split("."),e=h;c[0]in e||!e.execScript||e.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||void 0===b?e=e[f]?e[f]:e[f]={}:e[f]=b}function b(a){var b=a.length,c=0,e=Number.POSITIVE_INFINITY,f,g,h,l,m,n,q,t,w;for(t=0;t<b;++t)a[t]>c&&(c=a[t]),a[t]<e&&(e=a[t]);f=1<<c;g=new (k?Uint32Array:Array)(f);h=1;l=0;for(m=2;h<=c;){for(t=0;t<b;++t)if(a[t]===h){n=0;q=l;for(w=0;w<h;++w)n=n<<1|q&1,q>>=1;q=h<<16|t;for(w=n;w<f;w+=m)g[w]=q;++l}++h;l<<=1;m<<=1}return[g,
c,e]}function c(a,b){this.uf=[];this.Gf=32768;this.ta=this.Mc=this.va=this.Sf=0;this.input=k?new Uint8Array(a):a;this.ei=!1;this.Jf=n;this.yi=!1;if(b||!(b={}))b.index&&(this.va=b.index),b.hk&&(this.Gf=b.hk),b.ik&&(this.Jf=b.ik),b.resize&&(this.yi=b.resize);switch(this.Jf){case l:this.t=32768;this.P=new (k?Uint8Array:Array)(32768+this.Gf+258);break;case n:this.t=0;this.P=new (k?Uint8Array:Array)(this.Gf);this.Ab=this.hm;this.fi=this.Gl;this.Qf=this.$l;break;default:throw Error("invalid inflate mode");
}}function e(a,b){for(var c=a.Mc,e=a.ta,f=a.input,g=a.va,k=f.length;e<b;){if(g>=k)throw Error("input buffer is broken");c|=f[g++]<<e;e+=8}a.Mc=c>>>b;a.ta=e-b;a.va=g;return c&(1<<b)-1}function f(a,b){for(var c=a.Mc,e=a.ta,f=a.input,g=a.va,k=f.length,h=b[0],l=b[1];e<l&&!(g>=k);)c|=f[g++]<<e,e+=8;f=h[c&(1<<l)-1];k=f>>>16;a.Mc=c>>k;a.ta=e-k;a.va=g;return f&65535}function g(a){function c(a,b,g){var k,h=this.a,l,p;for(p=0;p<a;)switch(k=f(this,b),k){case 16:for(l=3+e(this,2);l--;)g[p++]=h;break;case 17:for(l=
3+e(this,3);l--;)g[p++]=0;h=0;break;case 18:for(l=11+e(this,7);l--;)g[p++]=0;h=0;break;default:h=g[p++]=k}this.a=h;return g}var g=e(a,5)+257,h=e(a,5)+1,l=e(a,4)+4,p=new (k?Uint8Array:Array)(u.length),m;for(m=0;m<l;++m)p[u[m]]=e(a,3);if(!k)for(m=l,l=p.length;m<l;++m)p[u[m]]=0;l=b(p);p=new (k?Uint8Array:Array)(g);m=new (k?Uint8Array:Array)(h);a.a=0;a.Qf(b(c.call(a,g,l,p)),b(c.call(a,h,l,m)))}var h=this,k="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array&&
"undefined"!==typeof DataView,l=0,n=1;c.prototype.dm=function(){for(;!this.ei;){var a=e(this,3);a&1&&(this.ei=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.va,c=this.P,f=this.t,h=a.length,p=void 0,m=void 0,J=c.length,m=void 0;this.ta=this.Mc=0;if(b+1>=h)throw Error("invalid uncompressed block header: LEN");p=a[b++]|a[b++]<<8;if(b+1>=h)throw Error("invalid uncompressed block header: NLEN");m=a[b++]|a[b++]<<8;if(p===~m)throw Error("invalid uncompressed block header: length verify");if(b+p>a.length)throw Error("input buffer is broken");
switch(this.Jf){case l:for(;f+p>c.length;){m=J-f;p-=m;if(k)c.set(a.subarray(b,b+m),f),f+=m,b+=m;else for(;m--;)c[f++]=a[b++];this.t=f;c=this.Ab();f=this.t}break;case n:for(;f+p>c.length;)c=this.Ab({ki:2});break;default:throw Error("invalid inflate mode");}if(k)c.set(a.subarray(b,b+p),f),f+=p,b+=p;else for(;p--;)c[f++]=a[b++];this.va=b;this.t=f;this.P=c;break;case 1:this.Qf(K,L);break;case 2:g(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.fi()};var m=[16,17,18,0,8,7,9,6,10,5,11,
4,12,3,13,2,14,1,15],u=k?new Uint16Array(m):m,m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],x=k?new Uint16Array(m):m,m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],A=k?new Uint8Array(m):m,m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],E=k?new Uint16Array(m):m,m=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=k?new Uint8Array(m):m,m=new (k?
Uint8Array:Array)(288),q,v;q=0;for(v=m.length;q<v;++q)m[q]=143>=q?8:255>=q?9:279>=q?7:8;var K=b(m),m=new (k?Uint8Array:Array)(30);q=0;for(v=m.length;q<v;++q)m[q]=5;var L=b(m);c.prototype.Qf=function(a,b){var c=this.P,g=this.t;this.ji=a;for(var k=c.length-258,h,l,m;256!==(h=f(this,a));)if(256>h)g>=k&&(this.t=g,c=this.Ab(),g=this.t),c[g++]=h;else for(h-=257,m=x[h],0<A[h]&&(m+=e(this,A[h])),h=f(this,b),l=E[h],0<B[h]&&(l+=e(this,B[h])),g>=k&&(this.t=g,c=this.Ab(),g=this.t);m--;)c[g]=c[g++-l];for(;8<=
this.ta;)this.ta-=8,this.va--;this.t=g};c.prototype.$l=function(a,b){var c=this.P,g=this.t;this.ji=a;for(var k=c.length,h,l,m;256!==(h=f(this,a));)if(256>h)g>=k&&(c=this.Ab(),k=c.length),c[g++]=h;else for(h-=257,m=x[h],0<A[h]&&(m+=e(this,A[h])),h=f(this,b),l=E[h],0<B[h]&&(l+=e(this,B[h])),g+m>k&&(c=this.Ab(),k=c.length);m--;)c[g]=c[g++-l];for(;8<=this.ta;)this.ta-=8,this.va--;this.t=g};c.prototype.Ab=function(){var a=new (k?Uint8Array:Array)(this.t-32768),b=this.t-32768,c,e,f=this.P;if(k)a.set(f.subarray(32768,
a.length));else for(c=0,e=a.length;c<e;++c)a[c]=f[c+32768];this.uf.push(a);this.Sf+=a.length;if(k)f.set(f.subarray(b,b+32768));else for(c=0;32768>c;++c)f[c]=f[b+c];this.t=32768;return f};c.prototype.hm=function(a){var b,c=this.input.length/this.va+1|0,e,f,g,h=this.input,l=this.P;a&&("number"===typeof a.ki&&(c=a.ki),"number"===typeof a.sl&&(c+=a.sl));2>c?(e=(h.length-this.va)/this.ji[2],g=e/2*258|0,f=g<l.length?l.length+g:l.length<<1):f=l.length*c;k?(b=new Uint8Array(f),b.set(l)):b=l;return this.P=
b};c.prototype.fi=function(){var a=0,b=this.P,c=this.uf,e,f=new (k?Uint8Array:Array)(this.Sf+(this.t-32768)),g,h,l,m;if(0===c.length)return k?this.P.subarray(32768,this.t):this.P.slice(32768,this.t);g=0;for(h=c.length;g<h;++g)for(e=c[g],l=0,m=e.length;l<m;++l)f[a++]=e[l];g=32768;for(h=this.t;g<h;++g)f[a++]=b[g];this.uf=[];return this.buffer=f};c.prototype.Gl=function(){var a,b=this.t;k?this.yi?(a=new Uint8Array(b),a.set(this.P.subarray(0,b))):a=this.P.subarray(0,b):(this.P.length>b&&(this.P.length=
b),a=this.P);return this.buffer=a};a("Zlib.RawInflate",c);a("Zlib.RawInflate.prototype.decompress",c.prototype.dm);var m={im:n,jm:l},y,F;if(Object.keys)q=Object.keys(m);else for(y in q=[],v=0,m)q[v++]=y;v=0;for(F=q.length;v<F;++v)y=q[v],a("Zlib.RawInflate.BufferType."+y,m[y])}).call(this);
r.wj={load:function(a,b,c,e){cc.V.No(a,function(b,c){a=r.gh(a);for(var h=(new Zlib.Qm(c)).Zn(),k="",l=h.length,n=0;n<l;n++)k+=String.fromCharCode(h[n]);c=k.split("data:image/gif;base64,");k=cc.path.zb(a,".plist");h=cc.path.zb(a,".png");cc.V.Kd[k]=JSON.parse(c[0]);k=new Image;k.src="data:image/gif;base64,"+c[1];cc.V.Kd[h]=k;cc.am.$k(h);r.h.Qa(a);b?e(b):e(null,"Not reachable!");cc.V.Fa(a);cc.V.Kd[a]="loaded!"})}};cc.i.K||cc.V.mp(["flax"],r.wj);r.Hg={Ln:"flax.SimpleButton",button:"flax.SimpleButton",jp:"flax.ProgressBar",Lo:"flax.Image",hp:"flax.Image",Il:"flax.ScrollPane",Yk:"flax.Gunner"};r.Ig={button:"flax.Button",Il:"flax.MCScrollPane",Yk:"flax.MCGunner",Bo:"flax.MCGunner"};r.Yi=0;r.Vi=1;r.Xi=2;r.Wi=3;r.np=function(a,b){r.Hg[a]=b};r.pp=function(a,b){r.Ig[a]=b};
r.pe=cc.ob.extend({Xd:null,nf:null,mf:null,Uf:null,ne:null,rf:null,Eb:function(){this.Xd={};this.nf={};this.mf={};this.Uf={};this.ne={};this.rf={}},wf:function(a,b){if(this.Cf(a,b))return r.Xi;var c=this.jc(a,b);return c?"jpg"==c.type||"png"==c.type?r.Wi:"share"==c.type?this.wf(this.Wg(a,c),b):r.Vi:r.Yi},ma:function(a,b,c,e,f){if(null==a||null==b)throw"Pleas give me assetsFile and assetID!";null==f&&c&&(f=c["class"]);if(c&&"string"===typeof c||f&&"string"!==typeof f)throw"Params error: maybe you are using the old api, please use the latest!";
this.Qa(a);var g=this.Vh(a,b);g.length&&(b=b+"$"+g[0]);var h=this.jc(a,b);if(h&&"share"==h.type)return this.ma(this.Wg(a,h),b,c,e,f);g=null;if(f&&(g=r.Wc(f),null==g))throw"The class: "+f+" doesn't exist!";if(null==g){var k=!1;null==h&&(h=this.Cf(a,b),k=!0);if(h)f=h.type,"null"==f&&"jpg"!=b&&"png"!=b&&(f=b),g=r.Wc(f),null==g&&(f=k?r.Ig[f]:r.Hg[f],g=r.Wc(f)),null==g&&(g=k?r.Ia:r.nb,f=k?"flax.MovieClip":"flax.Animator",k&&c&&!0===c.Kn&&(g=r.kd,f="flax.MovieClipBatch"));else throw"There is no display with assetID: "+
b+" in assets file: "+a+", or make sure the display is not a BLANK symbol!";}null==c&&(c={});h=null;k=c.parent;delete c.parent;!0===e?h=r.L.get(a,f,b).Td(b,k,c):(h=g.create?g.create(a,b):new g(a,b),h.$j(c),k&&k.o(h),h.w=f);return h},Ch:function(a,b,c){if(!r.$h(a))throw"cloneDisplay only support flax type display!";b=this.ma(a.b,a.d,{parent:c?a.parent:null},b,a.w);c&&b.n(a.A());b.Ii(a.Ff());b.ig(a.rotation);b.zIndex=a.zIndex;return b},Qa:function(a){if("undefined"!==typeof this.Xd[a])return!1;var b=
a;".flax"==cc.path.pf(a)&&(b=cc.path.zb(b,".plist"));var c=cc.V.$d(b);if(null==c)throw"Make sure you have pre-loaded the resource: "+a;if(!c.ii.xk||c.ii.xk<r.ll)throw"The resource: "+a+" was exported with the old version of Flax, please do it with current version!";var e=c.ii.fps;cc.Ni.yn(b);cc.V.Kd[b]="loaded!";var b=[],f=c.frames,g;for(g in f)b.push(g);b.sort();this.Xd[a]=b;c.sk&&this.Jj(a,c.sk,e);c.jl&&this.Lj(a,c.jl,e);c.yk&&this.Kj(a,c.yk);return!0},Jj:function(a,b,c){var e=[],f=null,g;for(g in b)e.push(g),
f=b[g],f.anchors&&(f.anchors=this.Ad(f.anchors)),f.gc&&(f.gc=this.Ad(f.gc)),f.fps=c||cc.k.j.sf,this.mf[a+g]=f,this.eh(a,g);this.nf[a]=e},Lj:function(a,b,c){for(var e in b){var f=b[e];f.anchors&&(f.anchors=this.Ad(f.anchors));f.gc&&(f.gc=this.Ad(f.gc));var g,h=f.children,k;for(k in h)g=h[k],g.frames=this.qh(g.frames);f.fps=c||cc.k.j.sf;this.Uf[a+e]=f;this.eh(a,e)}},Kj:function(a,b){for(var c in b)this.rf[a+c]=b[c]},eh:function(a,b){var c=b.split("$"),e=c[0],c=c[1];if(e&&c&&""!=e&&""!=c){var e=a+e,
f=this.ne[e];null==f&&(f=[],this.ne[e]=f);f.push(c)}},Ad:function(a){var b={},c;for(c in a)b[c]=this.qh(a[c]);return b},qh:function(a){a=a.split("|");for(var b=-1,c=[];++b<a.length;){var e=a[b];"null"===e?c.push(null):""===e?c.push(c[b-1]):c.push(e)}return c},Wg:function(a,b){return a.slice(0,a.indexOf("/"))+"/"+b.url+".plist"},Af:function(a,b,c){this.Qa(a);a=this.Xd[a];if(null==a)return[];-1==b&&(b=0);-1==c&&(c=a.length-1);return a.slice(parseInt(b),parseInt(c)+1)},Fk:function(a,b){var c=this.jc(a,
b);if(null==c)throw"There is no display named: "+b+" in assetsFile: "+a;return this.Af(a,c.start,c.end)},jc:function(a,b){this.Qa(a);return this.mf[a+b]},Ek:function(a){this.Qa(a);return this.nf[a]||[]},vo:function(a){a=this.Ek(a);return a[Math.floor(Math.random()*a.length)]},Cf:function(a,b){this.Qa(a);return this.Uf[a+b]},Vh:function(a,b){this.Qa(a);return this.ne[a+b]||[]},Nh:function(a,b){this.Qa(a);return this.rf[a+b]}});r.pe.create=function(){var a=new r.pe;a.Eb();return a};r.Y={rect:"Rect",Md:"Circle",xi:"Poly"};
r.qg=cc.ob.extend({name:null,c:null,type:r.Y.rect,physicsBody:null,Ea:null,R:null,qa:null,dc:0,zc:0,Oj:0,Re:null,$:null,U:function(a,b){a=a.split(",");this.type=a[0];this.qa=cc.a(parseFloat(a[1]),parseFloat(a[2]));this.dc=parseFloat(a[3]);this.zc=parseFloat(a[4]);this.Oj=parseFloat(a[5]);if(6<a.length){this.$=[];for(var c=a[6].split("'"),e=0;e<c.length-1;e+=2){var f=cc.a(parseFloat(c[e]),parseFloat(c[e+1]));this.$.push(f)}}!1===b&&(this.qa.x+=this.dc/2,this.qa.y+=this.zc/2);this.Re=cc.rect(this.qa.x-
this.dc/2,this.qa.y-this.zc/2,this.dc,this.zc)},Pd:function(a,b,c,e,f,g){if(this.Ea)return this.Ea;var h=this.physicsBody=this.c.physicsBody;if(null==h)throw"Please CreatePhysics in its owner firstly!";var k=this.ae(),l=this.Sa(),n=r.A(this.c,!0),m=null;if(this.type==r.Y.Md)m=new Box2D.rg.Bg.Cn,m.dn(0.5*k.width*r.Ff(this.c,!0).x/PTM_RATIO),n=cc.Gb(l,n),m.bn(cc.ib(n,1/PTM_RATIO));else if(this.type==r.Y.rect||this.type==r.Y.xi){if(this.type==r.Y.rect)for(this.$=[cc.a(-0.5*k.width,-0.5*k.height),cc.a(0.5*
k.width,-0.5*k.height),cc.a(0.5*k.width,0.5*k.height),cc.a(-0.5*k.width,0.5*k.height)],k=0;k<this.$.length;k++)l=this.$[k],l.x+=this.qa.x,l.y+=this.qa.y;for(var m=new Box2D.rg.Bg.fk,u=[],k=0;k<this.$.length;k++)l=cc.a(this.$[k]),l=this.c.ua(l),l.x-=n.x,l.y-=n.y,l.x/=PTM_RATIO,l.y/=PTM_RATIO,u.push(l);m.Tm(u)}else throw"The physics type: "+this.type+" is not supported!";n=new Box2D.Za.ek;n.shape=m;null==a&&(a=0);n.kf=a;null==b&&(b=0.2);n.tf=b;null==c&&(c=0);n.Ci=c;n.bi=e;null==f&&(f=1);null==g&&(g=
65535);n.filter.On=f;n.filter.gi=g;this.Ea=h.fd(n);this.Ea.gn(this);return this.Ea},lf:function(){this.Ea&&(r.xl(this.Ea),this.physicsBody=this.Ea=null)},ef:function(a){if(a.type==this.type&&this.type==r.Y.rect)return cc.tl(this.B(!0),a.B(!0));if(a.type==this.type&&this.type==r.Y.Md){var b=this.Sa(!0),c=a.Sa(!0);return cc.Yc(b,c)<=(this.ae().width+a.ae().width)/2}if(this.type==r.Y.rect)return this.Yg(this.B(!0),a.B(!0));if(this.type==r.Y.Md)return this.Yg(a.B(!0),this.B(!0))},Tn:function(a){return this.Dh(a)},
Dh:function(a){a=this.c.gb(a);return this.type==r.Y.rect?cc.zi(this.Re,a):this.type==r.Y.xi?this.Nj(a):cc.Yc(a,this.qa)<=this.dc/2},Nj:function(a){for(var b=!1,c=this.$.length,e=0,f=c-1;e<c;f=e++){var g=this.$[e],f=this.$[f];(intersect=g.y>a.y!==f.y>a.y&&a.x<(f.x-g.x)*(a.y-g.y)/(f.y-g.y)+g.x)&&(b=!b)}return b},Yg:function(a,b){var c=Math.abs(b.x+b.width/2-(a.x+a.width/2)),e=Math.abs(b.y+b.height/2-(a.y+a.height/2));if(c>a.width/2+b.width/2||e>a.height/2+b.width/2)return!1;if(c<=a.width/2||e<=a.height/
2)return!0;c-=a.width/2;e-=a.height/2;return c*c+e*e<=b.width/2*b.width/2},B:function(a){if(!1===a)return this.Re;a=this.Sa(!0);var b=this.ae();return cc.rect(a.x-b.width/2,a.y-b.height/2,b.width,b.height)},Sa:function(a){var b=this.c.ua(this.qa);!1===a&&this.c.parent&&(b=this.c.parent.gb(b));return b},ae:function(){var a=r.Ff(this.c,!0);return{width:this.dc*Math.abs(a.x),height:this.zc*Math.abs(a.y)}},Xn:function(){var a=this.B(!0);if(this.type==r.Y.rect)r.of(a);else{var b=cc.sg.create();r.I&&r.I.o(b,
99999);var c=cc.color(255,0,0,255),e=cc.color(0,255,0,122);if(this.type==r.Y.Md)b.Gh(this.Sa(!0),a.width/2);else{for(var f=a=null,g=null,h=0;h<this.$.length-1;h++)f=cc.a(this.$[h]),f=this.c.ua(f),0==h&&(a=cc.a(f)),g=cc.a(this.$[h+1]),g=this.c.ua(g),b.Rd(f,g,1,c,e);b.Rd(g,a,1,c,e)}}}});r.oi=new D.W;r.li=new D.W;r.ni=new D.W;r.mi=new D.W;r.T=null;r.cb=null;r.Bd=!1;r.wb=null;r.bc=null;r.ti=0;r.ep=1;r.dp=2;r.ui=cc.a();
r.Wn=function(a,b){r.T&&r.rk();var c=new Box2D.Za.Gn(new Box2D.rm.Em.Fn(a.x,a.y),!0===b);c.Vm(!0);r.ui=cc.a();r.T=c;r.wb=[];r.bc=[];return c};r.Pc=function(){if(null==r.T)throw"Pleas use flax.createPhysicsWorld to create the world firstly!";return r.T};r.$p=function(){r.Pc()&&r.I&&!r.Bd&&(r.tj(),r.I.jb(r.th,1/cc.k.j.sf),r.Bd=!0)};r.mg=function(){r.Bd&&r.I&&(r.I.cd(r.th),r.Bd=!1)};
r.rk=function(){if(r.T){r.mg();for(var a=r.T.qe();a;a=a.te()){var b=a.xa();b&&(b.ja=null);r.T.$i(a)}C(r.oi);C(r.li);C(r.ni);C(r.mi);r.T=null;r.cb=null;r.wb=null}};r.Bi=function(a){-1==r.wb.indexOf(a)&&r.wb.push(a)};r.xl=function(a){-1==r.bc.indexOf(a)&&r.bc.push(a)};
r.bp=function(a,b,c,e){r.Pc().Rm(function(f,g,h,k){f=f.xa();g=cc.ib(g,PTM_RATIO);var l=cc.Gb(c,g);h=cc.ib(h,cc.Zo(l,h));l=cc.Gb(c,cc.ib(h,2));h=r.vf(g,l);e&&0<e&&(k=r.vf(b,c),e/=Math.sin(Math.abs(h/2-k/2)*Math.PI/180),g=cc.Gb(g,r.Df(cc.a(),e,k)),l=cc.Yc(b,c),k=cc.Yc(b,g)/l,l=r.Df(g,l*(1-k),h));a(f,g,l,k)},cc.ib(b,1/PTM_RATIO),cc.ib(c,1/PTM_RATIO))};
r.cp=function(a,b,c){c||(c=r.ic);b=Math.round(b/c);for(var e=a.ug(),f=a.bj(),g={},h=0,k=r.T.qe();k;k=k.te())if(k!=a){var l=k.zm();l!=r.ti&&(k.Po=r.ti,k.qd=++h,g[k.qd]=l)}l=[];for(h=0;h<b;h++)r.T.kj(c,G,I),k=a.ug(),l.push(cc.a(k.x*PTM_RATIO,k.y*PTM_RATIO));for(k=r.T.qe();k;k=k.te())k.qd&&(k.fn(g[k.qd]),delete k.qd);a.cn(e,f);return l};
r.tj=function(){r.cb||(r.cb=new Box2D.Za.Dn,r.cb.pm=function(a){var b=a.re(),c=a.se(),b=b.xa()||b,c=c.xa()||c;b.c&&null==b.c.parent||c.c&&null==c.c.parent||(b.R=c.R=a,r.oi.J(b,c),b.R=c.R=null)},r.cb.vm=function(a){var b=a.re(),c=a.se(),b=b.xa()||b,c=c.xa()||c;b.c&&null==b.c.parent||c.c&&null==c.c.parent||(b.R=c.R=a,r.li.J(b,c),b.R=c.R=null)},r.cb.Jm=function(a){var b=a.re(),c=a.se(),b=b.xa()||b,c=c.xa()||c;b.c&&null==b.c.parent||c.c&&null==c.c.parent||(b.R=c.R=a,r.ni.J(b,c),b.R=c.R=null)},r.cb.Im=
function(a){var b=a.re(),c=a.se(),b=b.xa()||b,c=c.xa()||c;b.c&&null==b.c.parent||c.c&&null==c.c.parent||(b.R=c.R=a,r.mi.J(b,c),b.R=c.R=null)},r.T.Um(r.cb))};
r.Vn=function(a,b){if(null==a||0==a.length)a=[1,1,1,1];var c=r.Pc(),e=new Box2D.Za.ek;e.kf=1;null==b&&(b=3);e.tf=b;var f=new Box2D.Za.dk,g=cc.Ra.Uk();f.type=Box2D.Za.ck.In;e.shape=new Box2D.rg.Bg.fk;e.shape.jj(0.5*g.width/PTM_RATIO,0.5);a[0]&&(f.position.ld(0.5*g.width/PTM_RATIO,g.height/PTM_RATIO),c.ed(f).fd(e));a[1]&&(f.position.ld(0.5*g.width/PTM_RATIO,0),c.ed(f).fd(e));e.shape.jj(0.5,0.5*g.height/PTM_RATIO);a[2]&&(f.position.ld(0,0.5*g.height/PTM_RATIO),c.ed(f).fd(e));a[3]&&(f.position.ld(g.width/
PTM_RATIO,0.5*g.height/PTM_RATIO),c.ed(f).fd(e))};var G=8,I=1;r.th=function(a){for(var b=r.bc.length;b--;){var c=r.bc[b],e=c.ym();e&&e.tm(c);r.bc.splice(b,1)}for(b=r.wb.length;b--;)r.T.$i(r.wb[b]),r.wb.splice(b,1);r.T.kj(a,G,I);for(a=r.T.qe();a;a=a.te())b=a.xa(),null!=b&&null!=b&&b.parent&&(c=cc.a(a.ug()),c.x*=PTM_RATIO,c.y*=PTM_RATIO,c=cc.ag(c,r.ui),c=b.parent.gb(c),b.x=c.x,b.y=c.y,!0!==b.Zh&&(b.rotation=-1*RADIAN_TO_DEGREE*a.bj(),b.rotation+=a.nj))};r.Fe=null;
r.Yn=function(){null==r.Fe&&(r.Fe=new r.Zi(r.Pc()),r.I.o(r.Fe,Number.MAX_VALUE))};r.Zi=cc.ha.extend({Cd:null,U:function(a){this.l();this.Cd=a;a=Box2D.Za.En;var b=new a;b.en(document.getElementById("gameCanvas").getContext("2d"));var c=PTM_RATIO*cc.view.Ao().width/cc.view.so().width;b.Xm(c);b.Ym(0.5);b.$m(1);b.Zm(a.fo|a.eo|a.co);this.Cd.Wm(b)},ao:function(a){this.l();this.Cd&&(a.scale(1,-1),this.Cd.um(),a.scale(1,1),a.translate(0,0))}});r.pg=cc.ob.extend({x:0,y:0,zIndex:0,rotation:0,U:function(a){a=a.split(",");this.x=parseFloat(a[0]);this.y=parseFloat(a[1]);2<a.length&&(this.zIndex=parseInt(a[2]));3<a.length&&(this.rotation=parseFloat(a[3]))}});
r.nh={za:null,de:null,ie:null,ee:null,fe:null,ec:!1,Id:!1,cf:!1,fc:!1,p:0,na:null,ke:-1,wa:0,ic:0,Zh:!1,e:null,name:null,b:null,d:null,w:"flax.FlaxSprite",Hb:!1,Pe:null,qn:null,ub:0,Zb:0,yd:!1,ln:!0,pd:!1,sb:24,Ub:null,Na:null,ja:null,Pg:!1,S:null,Xb:!1,ea:0,fa:0,yh:!0,hq:d.lj,N:null,Te:!1,ah:!0,Tb:null,Gc:null,Ja:null,Bc:!1,aa:0,eb:null,ac:null,ka:null,U:function(a,b){if("flax.FlaxSprite"==this.w)throw"flax.FlaxSprite is an abstract class, please use flax.Animator or flax.MovieClip!";this instanceof
cc.Qb?cc.Qb.prototype.U.call(this,cc.path.Pn(a,".png")):cc.ya.prototype.U.call(this);if(!a||!b)throw"Please set assetsFile and assetID to me!";this.za=ClassManager.Qh();this.S=[];this.Ja=[];this.de=new D.W;this.ie=new D.W;this.ee=new D.W;this.fe=new D.W;this.Kb(a,b)},Kb:function(a,b){if(null==a||null==b)throw"assetsFile and assetID can not be null!";if(this.b!=a||this.d!=b&&this.Tb!=b){this.b=a;this.na=null;this.d=this.Aj(b);this.e=this.zf();var c=this.e.Gd,e=this.e.Hd;isNaN(c)||isNaN(e)||this.Ib(c,
e);0==this.fps&&(this.fps=this.e.fps);this.Xc();this.p=0;this.Fj();this.le(this.p,!0);this.Dj();this.parent&&this.sh();null==this.Rb&&(this.Rb=this.d);this.na&&this.fe.J(this.na)}},Aj:function(a){a=a.split("$");this.Tb=a[0];this.Gc=r.h.Vh(this.b,this.Tb);var b=a[1];null==b&&this.Gc&&(b=this.Gc[0]);a=this.Tb;b&&(a=this.Tb+"$"+b,this.na=b);return a},Fj:function(){this.Pe=[];this.Ke={};var a=this.e.labels;if(a){for(var b in a){var c=a[b];-1<b.indexOf("@")?(null==this.e.kg&&(this.e.kg={}),this.e.kg[""+
c.start]=DEFAULT_SOUNDS_FOLDER+b.slice(0,b.indexOf("@")),delete a[b]):this.Pe.push(c.start)}r.Nd(this.e.kg,this.Ke)}},vn:function(a,b){this.Ke[""+a]=b},wp:function(a){delete this.Ke[""+a]},Bf:function(a){return this.e.labels?this.e.labels[a]:null},cl:function(a){return null!=this.Bf(a)},Ph:function(){return this.Na},Rh:function(){return this.ja},xf:function(a){var b=null;if(this.Ub){var c=this.Ub[a];null!=c&&(b=c[this.p])}null==b&&cc.log("Warning: The collider: "+a+" can't be found at "+this.d+"of"+
this.b+", make sure you are a pro user!");return b},Pd:function(a,b,c){null==a&&(a=Box2D.Za.ck.Hn);this.ac={type:a,Ih:b,Ah:c};if(!this.parent)return null;if(null==this.ja){var e=new Box2D.Za.dk;e.type=a;e.Ih=b;e.Ah=c;e.mb=this;a=r.A(this,!0);e.position.ld(a.x/PTM_RATIO,a.y/PTM_RATIO);this.ja=r.Pc().ed(e);this.ja.nj=this.rotation}return this.ja},lf:function(){this.yl()},xn:function(a,b,c,e,f,g,h){if(null==this.ja)throw"Please createPhysics firstly!";var k=this.xf(a);if(null==k)return cc.log("There is no collider named: "+
a),null;if(k.Ea)return k.Ea;var l={kf:b,tf:c,Ci:e,bi:f,nk:g,gi:h};if(this.parent)return a=k.Pd(b,c,e,f,g,h),-1==this.ka.indexOf(k)&&this.ka.push(k),a;null==this.eb&&(this.eb={});null==this.eb[a]&&(this.eb[a]=l);return null},yl:function(a){for(var b=this.ka.length;b--;){var c=this.ka[b];if(null==a||c.name==a)c.lf(),this.ka.splice(b,1)}0==this.ka.length&&(r.Bi(this.ja),this.ja=null)},Dj:function(){this.Na=null;this.Ub={};var a=this.e.gc;if(a){var b=null,c;for(c in a){this.Ub[c]=[];for(var e=a[c],f=
-1;++f<e.length;)if(null==e[f])this.Ub[c][f]=null;else if(b=this.Ub[c][f]=new r.qg(e[f]),b.name=c,b.c=this,"main"==c||"base"==c)this.Na=b}}this.Pg=null!=this.Na;this.Pg||(this.Na=new r.qg("Rect,0,0,"+this.width+","+this.height+",0",!1),this.Na.name="main",this.Na.c=this);this.ka=[]},B:function(a){return this.Na.B(a)},Sa:function(a){return this.Na.Sa(a)},Yd:function(a){return this.e.anchors&&(a=this.e.anchors[a],null!=a)?new r.pg(a[this.p]):null},zh:function(a,b,c){if(!this.e.anchors)return cc.log(this.d+
": there is no any anchor!"),!1;if(null==this.e.anchors[a])return cc.log(this.d+": there is no anchor named "+a),!1;if(null==b)throw"Node can't be null!";if(-1<this.S.indexOf(b))return cc.log(this.d+": anchor has been bound, "+a),!1;!1!==c&&this.S.push(b);b.nd=a;this.Fd(b,this.Yd(a));b.parent!=this&&(b.da(!1),this.o(b));return!0},yf:function(){var a=this.e.labels;if(!a)return null;for(var b in a){var c=a[b];if(this.p>=c.start&&this.p<=c.end)return b}return null},So:function(){this.oa(Math.min(++this.p,
this.wa-1))},ke:function(){this.oa(Math.max(--this.p,0))},play:function(){this.yd||this.od||(this.ub=0,this.Zb=this.wa-1,this.oc(!0),this.na=null)},ql:function(a){if(null==a)return!1;a instanceof Array||(a=Array.prototype.slice.call(arguments));if(0==a.length)return!1;this.Bc=!1;this.aa=0;var b=this.Ta(a[0]);this.Ja=a;return b},fp:function(a){a instanceof Array||(a=Array.prototype.slice.call(arguments));this.ql(a);this.Bc=!0},Ki:function(a,b){if(!a||0==a.length)return!1;if(null==this.Gc||-1==this.Gc.indexOf(a))return this.od||
cc.log("There is no animation named: "+a),!1;this.Kb(this.b,this.Tb+"$"+a);!1===b?this.oa(0):this.Ta(0);this.na=a;this.Sb=0;return!0},Ta:function(a,b){if(this.yd||this.od)return!1;if("string"===typeof a){if(this.Hb&&this.na==a&&!0!==b)return!0;var c=this.Bf(a);if(null==c)return c=this.Ki(a,!0),c||(cc.log("There is no animation named: "+a),this.play()),c;this.ub=c.start;this.Zb=c.end;this.p=this.ub;this.na=a}else{if(!this.ci(a))return cc.log("The frame: "+a+" is out of range!"),!1;this.ub=0;this.Zb=
this.wa-1;this.p=a;this.na=null}this.le(this.p);this.oc(!0);this.Sb=0;return!0},stop:function(){this.oc(!1);this.na=null},oa:function(a){if(isNaN(a)){var b=this.Bf(a);if(null==b)return(b=this.Ki(a,!1))||this.od||cc.log("There is no animation named: "+a),b;a=b.start}this.na=null;if(!this.ci(a))return cc.log("The frame: "+a+" is out of range!"),!1;this.oc(!1);this.p=a;this.le(a);return!0},fg:function(a){this.sb!=a&&(this.sb=a,this.ng())},Mh:function(){return this.sb},oc:function(a){this.Hb!=a&&(this.Hb=
a,this.ng())},ng:function(){this.Hb?1<this.wa&&this.jb(this.qi,1/this.sb,cc.xe,0):this.cd(this.qi)},Sb:0,qi:function(a){if(this.visible){this.p++;this.Sb+=a;this.p>this.Zb&&(this.p=this.Zb,(this.ec||this.Id||this.cf)&&this.oc(!1),this.de.Ka.length&&this.de.J(this),this.ec?this.q():this.cf?this.visible=!1:this.Ja.length?this.Mj():this.Id||(this.p=this.ub),this.Sb=0);if(this.p>this.Zb||this.p>this.wa-1)this.p=this.ub;this.le(this.p)}},Mj:function(){this.aa++;if(this.aa>=this.Ja.length){this.ie.Ka.length&&
this.ie.J(this);if(!this.Bc){this.Ta(this.Ja[this.aa-1],!0);this.Ja=[];return}this.aa=0}var a=this.Ja,b=a[this.aa];if("number"===typeof b)if(this.Bc&&this.aa==a.length-1?this.aa=0:this.aa++,a.length>this.aa&&"string"===typeof a[this.aa]){var c=b,b=a[this.aa];this.Zc(function(){this.Ta(b)},c-this.Sb);this.oc(!1)}else this.Ja=[],this.p=this.ub;else this.Ta(b)},ci:function(a){return 0<=a&&a<this.wa},le:function(a,b){if(this.ke!=a||!0==b)this.ke!=a&&(this.ke=a),this.zj(),this.Qd(a),this.ee.Ka.length&&
this.ee.J(this.p),-1<this.Pe.indexOf(a)&&this.fe.J(this.yf(a))},Qd:function(){},zj:function(){for(var a=null,b=null,c=-1,e=this.S.length;++c<e;)a=this.S[c],a.visible&&(b=this.Yd(a.nd),null!=b&&this.Fd(a,b))},Fd:function(a,b){null!=b&&(a.x=b.x,a.y=b.y,a.zIndex=b.zIndex,a.rotation=b.rotation)},ca:function(){this.l();this.rb=!1;this.N&&!this.Te&&this.oe(!0);this.ac&&this.Pd(this.ac.type,this.ac.Ih,this.ac.Ah);if(this.eb)for(var a in this.eb){var b=this.xf(a),c=this.eb[a];b.Pd(c.kf,c.tf,c.Ci,c.bi,c.nk,
c.gi);delete this.eb[a];-1==this.ka.indexOf(b)&&this.ka.push(b)}this.sh();r.lk(this);this.Eg&&(this.Eg=!1,this.Fa())},Ua:function(){this.l();C(this.de);C(this.ie);C(this.ee);C(this.fe);r.Q.removeListener(this);this.pd&&r.Q.vl(this);this.N&&this.N.dg(this);for(var a=this.N=null,b=-1,c=this.S.length;++b<c;)a=this.S[b],a.q?a.q():a.da(!0),delete a.nd;for(b=this.S.length=0;b<this.ka.length;b++)this.ka[b].lf();this.ka=[];this.ja&&(r.Bi(this.ja),this.ja=null);this.ac=null;r.mk(this)},sh:function(){(this.yd=
-1<r.ce&&this.name&&0==this.name.indexOf("label__"))&&(this.oa(r.ce)||this.oa(0))},Rc:function(){return this.N},ad:function(a){!a||a instanceof r.qc||(a=r.Rc(a));this.N!=a&&(this.N&&this.N.dg(this),this.N=a,null!=this.N&&this.parent&&this.oe(!0))},oe:function(a){if(this.N){var b=this.A();this.parent&&(b=this.parent.ua(b));b=this.N.Qc(b);this.Tl(b.x,b.y,a)}},tn:function(){},n:function(a,b){var c=!1;void 0===b?(c=a.x!=this.x||a.y!=this.y)&&this.l(a):(c=a!=this.x||b!=this.y)&&this.l(a,b);c&&this.parent&&
this.yh&&this.N&&this.oe()},Gi:function(a){this.n(a,this.y)},Hi:function(a){this.n(this.x,a)},$b:null,Se:0,Hc:null,Ne:!1,moveTo:function(a,b){var c=cc.Gb(a,this.A());1>cc.bg(c)||!b||0>=b?this.n(a):(this.$b=cc.ib(c,1/b),this.Se=cc.bg(this.$b),this.Hc=a,this.Ne||this.jb(this.Ie,r.ic,cc.xe))},Ro:function(a,b){var c=cc.Gb(a,this.A()),e=cc.bg(c);1>e?this.n(a):(this.$b=cc.ib(c,b/e),this.Se=cc.bg(this.$b),this.Hc=a,this.Ne||this.jb(this.Ie,r.ic,cc.xe))},Ie:function(a){var b=this.A();cc.Yc(b,this.Hc)<this.Se*
a?(this.n(this.Hc),this.Hc=this.$b=null,this.Ne=!1,this.cd(this.Ie)):this.n(cc.ag(b,cc.ib(this.$b,a)))},Tl:function(a,b,c){if(!0===c||a!=this.ea||b!=this.fa){c=this.ea;var e=this.fa;this.ea=a;this.fa=b;this.N&&this.parent&&(this.N.dg(this,c,e),this.parent&&(this.N.Wj(this),this.Te=!0))}},rb:!1,q:function(){this.rb||(this.rb=!0,this.fc&&r.L.get(this.b,this.w,this.Rb||"").Ai(this),this.da())},lc:function(){this.fc=!1;this.Ii(1);this.opacity=255;this.rotation=0;this.Zh=this.cf=this.Id=this.ec=!1;this.oa(0);
this.Te=!1;this.n(0,0);this.Ja.length=0;this.Bc=!1;this.aa=0;this.na=null;this.pd=!1},Uc:function(){return this.ah},Ol:function(a){this.ah=a},zf:function(){return null},Xc:function(){}};r.pb=cc.ya.extend(r.nh);r.pb.create=function(a,b){var c=new r.pb(a,b);c.w="flax.FlaxSprite";return c};r.Ob=cc.Qb.extend(r.nh);r.Ob.create=function(a,b){var c=new r.Ob(a,b);c.w="flax.FlaxSpriteBatch";return c};window.H=r.pb.prototype;cc.f(_p,"mainCollider",_p.Ph);cc.f(_p,"physicsBody",_p.Rh);cc.f(_p,"center",_p.Sa);
cc.f(_p,"fps",_p.Mh,_p.fg);cc.f(_p,"tileMap",_p.Rc,_p.ad);cc.f(_p,"currentLabel",_p.yf);cc.f(_p,"x",_p.Lk,_p.Gi);cc.f(_p,"y",_p.Mk,_p.Hi);window.H=r.Ob.prototype;cc.f(_p,"mainCollider",_p.Ph);cc.f(_p,"physicsBody",_p.Rh);cc.f(_p,"center",_p.Sa);cc.f(_p,"fps",_p.Mh,_p.fg);cc.f(_p,"tileMap",_p.Rc,_p.ad);cc.f(_p,"currentLabel",_p.yf);cc.f(_p,"x",_p.Lk,_p.Gi);cc.f(_p,"y",_p.Mk,_p.Hi);delete window.H;r.nb=r.pb.extend({Wd:null,w:"flax.Animator",Xc:function(){this.Wd=r.h.Af(this.b,this.e.start,this.e.end);this.wa=this.Wd.length;0==this.wa&&cc.log("There is no frame for display: "+this.d)},Qd:function(a){this.Tp(this.Wd[a])},zf:function(){var a=r.h.jc(this.b,this.d);if(null==a)throw"There is no Animator named: "+this.d+" in assets: "+this.b+", or make sure this class extends from the proper class!";return a}});r.nb.create=function(a,b){var c=new r.nb(a,b);c.w="flax.Animator";return c};r.dj=cc.ya.extend({e:null,name:null,b:null,d:null,w:"flax.Image",fc:!1,S:null,za:null,U:function(a,b){cc.ya.prototype.U.call(this);if(!a||!b)throw"Please set assetsFile and assetID to me!";this.za=ClassManager.Qh();this.S=[];this.Kb(a,b)},Kb:function(a,b){if(null==a||null==b)throw"assetsFile and assetID can not be null!";if(this.b!=a||this.d!=b){this.b=a;this.d=b;this.e=r.h.jc(this.b,this.d);var c=this.b.slice(0,this.b.lastIndexOf("/"));this.Fo(c+"/"+this.e.url);var c=this.e.Gd,e=this.e.Hd;isNaN(c)||
isNaN(e)||this.Ib(c,e);this.Xc();null==this.Rb&&(this.Rb=this.d)}},rb:!1,q:function(){this.rb||(this.rb=!0,this.fc&&r.L.get(this.b,this.w,this.Rb||"").Ai(this),this.da())},ca:function(){this.l();this.rb=!1},Ua:function(){this.l();r.Q.removeListener(this);for(var a=null,b=-1,c=this.S.length;++b<c;)a=this.S[b],a.q?a.q():a.da(!0),delete a.nd;this.S.length=0},lc:function(){this.fc=!1;this.Ii(1);this.opacity=255;this.rotation=0;this.n(0,0)},Yd:function(a){return this.e.anchors&&(a=this.e.anchors[a],null!=
a)?new r.pg(a[0]):null},zh:function(a,b,c){if(!this.e.anchors)return cc.log(this.d+": there is no any anchor!"),!1;if(null==this.e.anchors[a])return cc.log(this.d+": there is no anchor named "+a),!1;if(null==b)throw"Node can't be null!";if(-1<this.S.indexOf(b))return cc.log(this.d+": anchor has been bound, "+a),!1;!1!==c&&this.S.push(b);b.nd=a;this.Fd(b,this.Yd(a));b.parent!=this&&(b.da(!1),this.o(b));return!0},Fd:function(a,b){null!=b&&(a.x=b.x,a.y=b.y,a.zIndex=b.zIndex,a.rotation=b.rotation)},Xc:function(){}});r.tg=cc.ob.extend({x:0,y:0,rotation:0,Ga:1,Ha:1,opacity:255,zIndex:-1,Li:0,Mi:0,font:null,fontSize:12,Vd:"",textAlign:"",Lb:40,lb:20,Zg:!1,Og:null,Le:!1,U:function(a){this.Og=a;this.x=parseFloat(a[0]);this.y=parseFloat(a[1]);this.rotation=parseFloat(a[2]);this.Ga=parseFloat(a[3]);this.Ha=parseFloat(a[4]);this.opacity=Math.round(255*parseFloat(a[5]));6<a.length&&(this.zIndex=parseInt(a[6]));7<a.length&&(this.Li=parseFloat(a[7]));8<a.length&&(this.Mi=parseFloat(a[8]));this.Le=7<a.length;9<a.length&&
(this.Zg=!0,this.font=a[9],this.fontSize=parseInt(a[10]),this.Vd=cc.Do(a[11]),this.textAlign=H_ALIGHS.indexOf(a[12]),this.Lb=parseFloat(a[13]),this.lb=parseFloat(a[14]))},Kl:function(a){this.Le||this.rotation==a.rotation||(a.rotation=this.rotation);this.Ga!=a.Ga&&(a.Ga=this.Ga);this.Ha!=a.Ha&&(a.Ha=this.Ha);this.Le&&(a.Bp=this.Li,a.Cp=this.Mi);a.Mp&&this.opacity!=a.opacity&&(a.opacity=this.opacity);var b=this.x,c=this.y;this.font&&a instanceof cc.hd&&(a.gg(this.font),a.Jp(this.Vd),a.Kp(this.textAlign),
a.Hp({width:this.Lb,height:this.lb}),a.Ei(this.fontSize-1),a.Ei(this.fontSize),b+=this.Lb/2,c-=this.lb/2);b!=a.x&&(a.x=b);c!=a.y&&(a.y=c)},Sn:function(){return new r.tg(this.Og)}});
r.bh={w:"flax.MovieClip",sa:!1,Di:!0,s:null,Ic:null,Je:null,Fg:!0,replaceChild:function(a,b,c){var e=this.e.children[a];if(null==e)cc.log("There is no child with named: "+a+"  in MovieClip: "+this.d);else{var f=this.s[a];if(f){c||(c=this.b);e=r.h.wf(c,b);if(!e)throw"There is no display with assetID: "+b+" in assets: "+c;r.h.wf(f.b,f.d)==e?f.Kb(c,b):(f.q(),f=r.h.ma(c,b,null,!0),f.name=a,this.s[a]=f,this.sa&&r.Fb(f)&&(this.Hb?f.Ta(0):f.oa(0)),this[a]=f,this.o(f))}else e["class"]=b,e.b=c}},Xc:function(){for(var a in this.s)this.s[a].q(),
delete this[a];this.s={};this.wa=this.e.wa;this.Ic=this.Sj(this.e.rect);this.Jb(this.Ic.width,this.Ic.height);this.Ej()},Ej:function(){this.Je={};for(var a in this.e.children){for(var b=[],c=this.e.children[a].frames,e=-1;++e<c.length;){var f=c[e];f&&(f=f.split(","),b[e]=new r.tg(f))}this.Je[a]=b}},ca:function(){this.l();this.Jb(this.Ic.width,this.Ic.height)},Qd:function(a){var b,c,e,f;for(f in this.e.children)c=this.e.children[f],e=this.Je[f][a],b=this.s[f],e?(null==b&&(b=null!=c.text?r.Pb.create(this.b,
e,c):r.h.ma(c.b||this.b,c["class"],null,!0),b.name=f,this.s[f]=b,this.sa&&r.Fb(b)&&(this.Hb?b.Ta(0):b.oa(0)),this[f]=b),e.Kl(b),this.Di&&(b.fps=this.fps),b.visible=!0,(b.sa=this.sa)&&r.Fb(b)&&(this.Hb?b.play():b.stop()),c=-1==e.zIndex?c.zIndex:e.zIndex,b.parent!=this?(b.da(!1),this.o(b,c)):b.zIndex!=c&&(b.zIndex=c)):b&&(b.q?b.q():b.da(!0),delete this.s[f])},stop:function(){this.l();if(this.sa)for(var a in this.s){var b=this.s[a];r.Fb(b)&&b.stop()}},play:function(){this.l();if(this.sa)for(var a in this.s){var b=
this.s[a];r.Fb(b)&&b.play()}},Wo:function(){},zf:function(){var a=r.h.Cf(this.b,this.d);if(null==a)throw"There is no MovieClip named: "+this.d+" in assets: "+this.b+", or make sure this class extends from the proper class!";return a},Zd:function(a,b){void 0===b&&(b=!0);var c=this.s[a];if(c)return c;if(!b)return null;for(var e in this.s)if(c=this.s[e],c.Zd&&(c=c.Zd(a,b)))return c},po:function(a){var b=null,c;for(c in this.s)if(b=this.s[c],b.d==a)return b;return null},to:function(a,b){var c=this.Zd(a,
void 0===b?!0:b);return c&&c instanceof r.Pb?c.ba:null},Lp:function(a,b,c){return(a=this.Zd(a,void 0===c?!0:c))&&a instanceof r.Pb?(a.kb(b),a):null},fg:function(a){if(this.sb!=a&&(this.sb=a,this.ng(),this.Di)){a=null;for(var b in this.s)a=this.s[b],a.fps=this.sb}},lc:function(){this.l();this.sa=!1;for(var a in this.s){var b=this.s[a];r.Fb(b)&&b.oa(0)}},Sj:function(a){a=a.split(",");return cc.rect(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]))}};r.Ia=r.pb.extend(r.bh);
r.Ia.create=function(a,b){var c=new r.Ia(a,b);c.w="flax.MovieClip";return c};r.kd=r.Ob.extend(r.bh);r.kd.create=function(a,b){var c=new r.kd(a,b);c.w="flax.MovieClipBatch";return c};r.we={vg:"horizontal",jn:"vertical",ij:"radial"};
r.ve=r.nb.extend({r:null,Jc:r.we.vg,Ec:!1,yb:null,ca:function(){this.l()},Kk:function(){return this.r?this.r.percentage:0},Pl:function(a){this.r&&(this.r.percentage=a)},Tk:function(){return this.Jc},Wl:function(a){this.Jc!=a&&(this.Jc=a,this.We())},Ok:function(){return this.Ec},Ql:function(a){this.Ec!=a&&(this.Ec=a,this.We(),this.percentage+=0.1,this.percentage-=0.1)},iq:function(a,b,c){null!=this.r&&(this.yb&&this.r.Xl(this.yb),this.yb=cc.Lm.create(c,a,b),this.r.El(this.yb))},eq:function(){this.yb&&
this.r&&(this.r.Xl(this.yb),this.yb=null)},Qd:function(a){if(a=cc.Ni.Rk(this.Wd[a]))a=cc.ya.create(a),null==this.r?(this.width=a.width,this.height=a.height,this.r=cc.Mm.create(a),this.We(),this.r.Ib(this.Ak()),this.r.n(this.Bk()),this.o(this.r)):this.r.Sp(a)},We:function(){if(null!=this.r)if(this.Jc==r.we.ij)this.r.type=0,this.r.Qp(this.Ec),this.r.kl=cc.a(0.5,0.5);else{this.r.type=1;var a=this.Jc==r.we.vg,b=cc.a(0,0),c=cc.a(a?1:0,a?0:1);this.Ec&&(a?b.x=1:b.y=1);this.r.kl=b;this.r.Jn=c}}});
r.ve.create=function(a,b){var c=new r.ve(a,b);c.w="flax.ProgressBar";return c};window.H=r.ve.prototype;cc.f(_p,"percentage",_p.Kk,_p.Pl);cc.f(_p,"type",_p.Tk,_p.Wl);cc.f(_p,"reversed",_p.Ok,_p.Ql);delete window.H;r.Pb=cc.ya.extend({X:0,Da:0,Bb:null,fontSize:20,frames:[],Ld:[],b:null,name:null,Va:null,ba:null,wd:0,Ed:10,La:null,$a:null,Uh:function(){return this.ba},kb:function(a){a!==this.ba&&(this.ba=""+a,this.Xe())},Qk:function(){return this.Ed},Sl:function(a){this.Ed!=a&&(this.Ed=a,this.ba&&-1<this.ba.indexOf(" ")&&this.Xe())},Gk:function(){return this.wd},Ll:function(a){a!=this.wd&&(this.wd=a,this.ba&&this.Xe())},gg:function(a){if(null!=a&&(null==this.Bb||this.Bb!=a)){this.Bb=a;this.$a=r.h.Nh(this.b,this.Bb);
if(null==this.$a)throw"Can't find the font named: "+this.Bb;this.frames=r.h.Af(this.b,parseInt(this.$a.start),parseInt(this.$a.end));this.Ld=this.$a.Ld;this.fontSize=parseInt(this.$a.size)}},jq:function(a,b,c){this.kb(a);var e=r.ml(b-a);if(0!=e){var f=Math.abs(b-a),g=Math.max(c/f,r.ic),f=Math.round(c/g),e=e*Math.round(Math.abs(b-a)/f);this.jb(function(){var a=parseInt(this.ba),c=a+e;0<e&&c>b?c=b:0>e&&c<b&&(c=b);c!=a&&this.kb(c)},g,f+10)}},Xe:function(){if(null==this.La){var a=cc.path.zb(this.b,".png");
this.La=new cc.Qb(a,this.ba.length);this.o(this.La)}this.La.sp();for(i=this.Da=this.X=0;i<this.ba.length;i++)if(a=this.ba[i],"\n"!=a)if(" "==a)this.X+=this.Ed;else{for(var b=-1,c=0;c<this.Ld.length;c++)if(this.Ld[c]==a){b=c;break}-1==b?cc.log("Not found the char: "+a+" in the fonts: "+this.Bb):(sprite=cc.ya.create(cc.Ni.Rk(this.frames[b])),sprite.Gd=this.$a.Gd,sprite.Hd=this.$a.Hd,a=sprite.Nc(),sprite.x=this.X,sprite.y=0,this.X+=a.width,i!=this.ba.length-1&&(this.X+=this.wd),this.Da=a.height>this.Da?
a.height:this.Da,this.La.o(sprite))}if(this.Va)for(b=Math.max(this.X/this.Va.Lb,this.Da/this.Va.lb),a=0,1<b&&(c=1/b,this.La.scale=c,a=this.Da*(1-1/b)*b,this.X*=c,this.Da*=c),b=(this.Va.Lb-this.X)/2,i=this.La.ok;i--;)charChild=this.La.children[i],"center"==H_ALIGHS[this.Va.textAlign]?charChild.x+=b:"right"==H_ALIGHS[this.Va.textAlign]&&(charChild.x+=2*b),charChild.y-=a;this.La.Jb(this.X,this.Da);this.Jb(this.X,this.Da)},B:function(a){a=!1!==a;var b=cc.rect(0.5*this.width/this.ba.length,-this.Va.lb,
this.width,this.height+2);b.y+=(this.Va.lb-this.height)/2-1;if(!a)return b;a=b.width;var c=b.height,b=cc.a(b.x,b.y),b=this.ua(b);return cc.rect(b.x,b.y,a,c)},q:function(){this.da()}});window.H=r.Pb.prototype;cc.f(_p,"gap",_p.Gk,_p.Ll);cc.f(_p,"spaceGap",_p.Qk,_p.Sl);cc.f(_p,"text",_p.Uh,_p.kb);delete window.H;window.H=cc.hd.prototype;cc.f(_p,"text",_p.Uh,_p.kb);delete window.H;
r.Pb.create=function(a,b,c){if(!1===b.Zg)throw"The assetsFile: "+a+" was exported with old version of Flax tool, re-export it to fix the Text issue!";cc.i.K||(c.text=c.text.split("\\").join(""));var e=null,f=c["class"],e=r.h.Nh(a,f);if(!0==c.input){if(null==cc.aj)throw"If you want to use input text, please add module of 'editbox' into project.json!";e=r.h.Fk(a,f);e=new cc.aj(cc.size(b.Lb,b.lb),new cc.xg(e[0]),e[1]?new cc.xg(e[1]):null,e[2]?new cc.xg(e[2]):null);e.Ip(b.Vd);e.gg(b.font);e.Ei(b.fontSize);
e.Np(c.text);e.Op(b.font);e.Pp(b.fontSize);b=r.h.jc(a,f);e.Ib(b.Gd,b.Hd)}else b.font&&null==e?(a=new cc.xm,a.Bb=b.font,a.fontSize=b.fontSize,a.textAlign=b.textAlign,a.verticalAlign=cc.kn,a.fillStyle=b.Vd,a.no=!0,a.boundingWidth=b.Lb,a.boundingHeight=b.lb,e="null"==f?new cc.hd(c.text,a):new cc.hd(r.Hk(f)||c.text,a)):(e=new r.Pb,r.h.Qa(a),e.b=a,e.Va=b,e.gg(f),e.Ib(0,0),e.kb(c.text));return e};r.ab=null;r.op=function(a,b){a&&b&&("string"==typeof b&&(b=[b]),null==r.ab&&(r.ab={}),r.ab[a]=b)};MOUSE_DOWN_SCALE=0.95;
r.Kg={Rn:null,group:null,Dc:!1,Pa:null,Wb:null,od:!0,ca:function(){this.l();this.Wb={x:this.Ga,y:this.Ha};r.Q.addListener(this,this.Ij,"onPress");r.Q.addListener(this,this.Gj,"onClick");r.Q.addListener(this,this.Hj,"onMouseMove")},Ua:function(){this.group&&(this.group.ul(this),this.group=null);this.l()},lc:function(){this.l();this.Dc=!1;this.Pa=null},pa:function(a){if(this.Pa!=a){var b=this.hb();this.Pa=a;this.oa(this.Pa)||this.oa(this.hb()?"selected":"up")||(1==this.wa&&this.Wb&&(-1<this.Pa.indexOf("down")?
(this.Ga=this.Wb.x*MOUSE_DOWN_SCALE,this.Ha=this.Wb.y*MOUSE_DOWN_SCALE):(this.Ga=this.Wb.x,this.Ha=this.Wb.y)),this.oa(0));this.fh();this.hb()&&!b&&this.group&&this.group.fm(this)}},Th:function(){return this.Pa},hb:function(){return this.Pa&&0==this.Pa.indexOf("selected")},Ji:function(a){this.hb()!=a&&this.Of()&&this.Uc()&&this.pa(a?"selected":"up")},Of:function(){return this.cl("selected")},Ol:function(a){if(this.Uc()==a)return!1;this.pa(a?"up":"disabled");return!0},Uc:function(){return"disabled"!=
this.Pa},Fi:function(a){this.Dc!=a&&(this.Dc=a,this.fh())},Sh:function(){return this.Dc},Ij:function(){this.Ve("down")},Gj:function(){this.Of()?!this.hb()||this.group?this.pa("selected"):this.pa("up"):this.pa("up")},Hj:function(a){r.be(this,a.Oc())?this.Ve("down"):this.Ve("up")},Ve:function(a){this.Of()&&this.hb()&&(a="up"==a?"selected":"selected_"+a);this.pa(a)},fh:function(){for(var a=this.ok;a--;){var b=this.children[a];r.Fb(b)&&(this.Dc?(b.sa=!0,b.play()):(b.sa=!1,b.stop()))}}};r.md=r.nb.extend(r.Kg);
r.md.create=function(a,b){var c=new r.md(a,b);c.w="flax.SimpleButton";c.pa("up");return c};window.H=r.md.prototype;cc.f(_p,"state",_p.Th,_p.pa);cc.f(_p,"playChildrenOnState",_p.Sh,_p.Fi);cc.f(_p,"selected",_p.hb,_p.Ji);delete window.H;r.dd=r.Ia.extend(r.Kg);r.dd.create=function(a,b){var c=new r.dd(a,b);c.w="flax.Button";c.pa("up");return c};window.H=r.dd.prototype;cc.f(_p,"state",_p.Th,_p.pa);cc.f(_p,"playChildrenOnState",_p.Sh,_p.Fi);cc.f(_p,"selected",_p.hb,_p.Ji);delete window.H;
r.qm=cc.ob.extend({buttons:null,$c:null,he:null,U:function(){this.buttons=[];this.he=new D.W},un:function(a){a instanceof Array||(a=Array.prototype.slice.call(arguments));for(var b=0;b<a.length;b++){var c=a[b];!r.el(c)||-1<this.buttons.indexOf(c)||(this.buttons.push(c),c.group=this)}},ul:function(a){var b=this.buttons.indexOf(a);-1<b&&(this.buttons.splice(b,1),a.group=null,this.$c==a&&(this.$c=this.buttons[0])&&this.$c.pa("selected"));0==this.buttons.length&&(C(this.he),this.he=null)},fm:function(a){for(var b=
0;b<this.buttons.length;b++){var c=this.buttons[b];c!=a&&c.pa("up")}this.$c=a;this.he.J(a)}});r.Km=cc.yg.extend({pn:null,rn:0,nn:0,Ac:null,mn:"flax.Preloader",Yb:null,Xb:!1,Eb:function(){if(!this.Xb){this.Xb=!0;var a=this,b=cc.Ra.Uk(),c=cc.a(b.width/2,b.height/2),e=cc.k.j.Oo;e&&r.Nf(e)?cc.V.load(e,function(){a.Yb=cc.ya.create(e);a.Yb.n(c);a.o(a.Yb,10);cc.i.K||a.Eh(cc.Gb(c,cc.a(0,a.Yb.height/2+10)));a.hl()}):a.Eh(c);return!0}},Eh:function(a){var b=this.Ac=cc.hd.create("Loading...","Arial",16);b.ho(cc.color(51,51,51),2);b.Gp(cc.color(255,255,255));b.n(a);this.o(b,10)},hl:function(){var a=this.Yb,
b=cc.Nb.create({event:cc.Nb.Cg,Pi:!1,ri:function(b){cc.zi(r.B(a,!0),b.Oc())&&r.Vk()}});cc.Sd.addListener(b,this.Yb)},ca:function(){cc.ha.prototype.ca.call(this);this.jb(this.oh,0.3)},Ua:function(){cc.ha.prototype.Ua.call(this);this.Ac&&this.Ac.kb("Loaded")},dl:function(a,b){this.Eb();"string"==typeof a&&(a=[a]);this.Al=a||[];this.Bh=b},oh:function(){var a=this;a.cd(a.oh);cc.V.load(a.Al,function(b,c,e){null!=a.Ac&&(Math.min(e/c*100|0,100),a.Ac.kb("Loading: "+(e+1)+"/"+c))},function(){a.Bh&&a.Bh()})}});ALL_DIRECTONS="UP DOWN LEFT RIGHT LEFT_UP RIGHT_UP RIGHT_DOWN LEFT_DOWN".split(" ");ALL_DIRECTONS0="UP DOWN LEFT RIGHT LEFT_UP LEFT_DOWN".split(" ");ALL_DIRECTONS1="UP DOWN LEFT RIGHT RIGHT_UP RIGHT_DOWN".split(" ");EIGHT_DIRECTIONS_VALUE={hn:[0,1],sm:[0,-1],Bm:[-1,0],Nm:[1,0],Dm:[-1,1],Pm:[1,1],Om:[1,-1],Cm:[-1,-1]};MAX_IN_TILE=10;
r.qc=cc.ob.extend({id:"default",offsetX:0,offsetY:0,Tc:!1,ak:!1,O:0,la:0,G:0,F:0,M:null,C:null,xd:!1,U:function(a){a&&(this.id=a)},update:function(){for(var a=this.C?this.C.length:0;a--;){var b=this.C[a];b.yh&&b.oe()}},Ul:function(a,b){if(this.O!=a||this.la!=b)this.O=a,this.la=b},Sk:function(){return{width:this.O,height:this.la}},Nl:function(a,b){null==a&&(a=cc.ga.width);null==b&&(b=cc.ga.height);return this.Ml(Math.ceil(a/this.O),Math.ceil(b/this.la))},Jk:function(){var a=cc.size(this.O*this.G,this.la*
this.F);this.Tc&&(a.width+=0.5*this.O);return a},Ml:function(a,b){var c=[[],[]];if(this.G==a&&this.F==b)return c;null==this.C&&(this.C=[]);null==this.M&&(this.M=[]);for(var e=this.G,f=this.F,g=-1,h=-1,k=Math.max(a,e),l=Math.max(b,f);++g<k;){null==this.M[g]&&(this.M[g]=[]);for(h=-1;++h<l;)g>=a||h>=b?(c[0]=c[0].concat(this.M[g][h]),this.wl(g,h),delete this.M[g][h]):g<e&&h<f||(this.M[g][h]=[],c[1].push([g,h]));0==this.M[g].length&&delete this.M[g]}this.G=a;this.F=b;return c},Ik:function(){return{width:this.G,
height:this.F}},Vp:function(){if(null!=r.I){r.nc?r.nc.clear():(r.nc=cc.sg.create(),r.I.o(r.nc,1E5));r.nc.n(this.offsetX,this.offsetY);for(var a=0;a<=this.G;a++)r.nc.Rd(cc.a(a*this.O,0),cc.a(a*this.O,this.la*this.F),1,cc.color(255,0,0,255));for(a=0;a<=this.F;a++)r.nc.Rd(cc.a(0,a*this.la),cc.a(this.O*this.G,a*this.la),1,cc.color(255,0,0,255))}},Wp:function(a,b,c){a=this.Wh(a,b);null==c&&(c=cc.color(0,255,0,128));r.of(cc.rect(a.x-this.O/2,a.y-this.la/2,this.O,this.la),1,c,c)},clear:function(a){if(0!=
this.C.length){void 0===a&&(a=!0);for(var b,c=0;c<this.G;c++)for(var e=0;e<this.F;e++){if(a){b=this.M[c][e];for(var f in b){var g=b[f];g instanceof cc.ha&&g.q()}}this.M[c][e]=[]}this.C.length=0}},Qc:function(a){var b=Math.floor((a.x-this.offsetX)/this.O),c=Math.floor((a.y-this.offsetY)/this.la);this.Tc&&0!=c%2&&(b=Math.floor((a.x-this.offsetX-0.5*this.O)/this.O));return cc.a(b,c)},Wh:function(a,b){var c=(a+0.5)*this.O+this.offsetX,e=(b+0.5)*this.la+this.offsetY;this.Tc&&0!=b%2&&(c+=0.5*this.O);return cc.a(c,
e)},ro:function(a,b){var c=r.B(a,!0);return this.Kh(c,b)},Kh:function(a,b){b=!0===b;for(var c=this.Qc(cc.a(a.x,a.y)),e=c.x,f=c.y,c=this.Qc(cc.a(a.x+a.width,a.y+a.height)),g=c.x,c=c.y,h=[],e=e-1,k=0;++e<=g;)for(k=f-1;++k<=c;)b?h=h.concat(this.Db(e,k)):h.push(cc.a(e,k));return h},kc:function(a,b){return 0<=a&&a<this.G&&0<=b&&b<this.F},jg:function(a,b,c,e){if(a instanceof cc.ha){var f=null;if(null==b||null==c)f=a.A(),a.parent&&(f=a.parent.ua(f)),c=this.Qc(f),b=c.x,c=c.y;f=this.Wh(b,c);a.parent&&(f=a.parent.gb(f));
a.n(f);!0===e&&a.ad(this)}},Yp:function(){for(var a=this.C.length,b=-1,c=null;++b<a;)c=this.C[b],this.jg(c)},Wj:function(a,b,c){void 0===b&&(b=a.ea);void 0===c&&(c=a.fa);a.ea=b;a.fa=c;if(this.kc(b,c)&&!(-1<this.C.indexOf(a))){this.C.push(a);var e=this.M[b][c];!this.xd&&cc.i.K&&(this.xd=!0,cc.Ra.Pk().Ep(this));if(a instanceof cc.ha&&this.ak){b=(b+(this.F-1-c)*this.G)*MAX_IN_TILE;c=null;for(var f=0,g=!1,h=0;h<e.length;h++)c=e[h],c instanceof cc.ha&&(!g&&c.y<=a.y&&(e.splice(h,0,a),a.zIndex=Math.min(f,
MAX_IN_TILE)+b,g=!0,f++,h++),c.zIndex=Math.min(f,MAX_IN_TILE)+b,f++);g||(e.push(a),a.oq=Math.min(f,MAX_IN_TILE)+b)}else e.push(a)}},lq:function(a,b){if(this.kc(a,b)){var c=this.M[a][b];if(0!=c.length){c.sort(this.Qj);for(var e=null,f=0,g=0;g<c.length;g++)e=c[g],e instanceof cc.ha&&(e.zIndex=Math.min(f,MAX_IN_TILE)+zIndex0,f++)}}},dg:function(a,b,c){void 0===b&&(b=a.ea);void 0===c&&(c=a.fa);this.kc(b,c)&&(b=this.M[b][c],c=b.indexOf(a),-1<c&&b.splice(c,1),c=this.C.indexOf(a),-1<c&&this.C.splice(c,1));
this.xd&&cc.i.K&&0==this.C.length&&(this.xd=!1,cc.Ra.Pk().kq(this))},wl:function(a,b){if(this.kc(a,b))for(var c=this.M[a][b],e=null,e=-1;c.length;)e=c[0],e.ea=e.fa=-1,e=this.C.indexOf(e),-1<e&&this.C.splice(e,1),c.splice(0,1)},Db:function(a,b){return this.kc(a,b)?this.M[a][b]:[]},uo:function(a,b){var c=this.Qc(cc.a(a,b));return this.Db(c.x,c.y)},oo:function(){return this.C},yo:function(a){for(var b=[],c=-1,e=-1;++c<this.G;)for(e=-1;++e<this.F;)null!=a&&!1===a(this,c,e)||b.push(cc.a(c,e));return b},
wo:function(a,b){for(var c=-1,e=[];++c<this.F;)e=!0===b?e.concat(this.Db(a,c)):e.push(cc.a(a,c));return e},qo:function(a,b){for(var c=-1,e=[];++c<this.G;)e=!0===b?e.concat(this.Db(c,a)):e.push(cc.a(c,a));return e},ia:null,Ae:!1,io:function(a,b,c){this.ia={};b=this.Ud(a,b,c,null,!1);a=b.indexOf(a);-1<a&&b.splice(a,1);this.ia=null;return b},Ud:function(a,b,c,e,f){for(var g=this.xj(a,c,e),h=!this.Ae&&null!=this.ia,k=[],l=g.length;l--;){var n=EIGHT_DIRECTIONS_VALUE[g[l]],m=a.ea+n[0],n=a.fa+n[1];if(this.ia){var u=
m+"-"+n;if(!0===this.ia[u])continue;this.ia[u]=!0}if(f)k.push({x:m,y:n});else for(var m=this.Db(m,n),n=null,u=!1,x=0;x<m.length;x++)if(n=m[x],null==b||0==b.length||n[b]===a[b])k.push(n),!u&&h&&(k=k.concat(this.Ud(n,b,c,e,f)),u=!0)}return k},ko:function(){var a=[],b=null;this.ia={};var c=this.C,e=[],f=c.length;for(i=0;i<f;i++)nb=c[i],-1<e.indexOf(nb)||(b=this.Ud(nb),b.length||!0===this.ia[nb.ea+"-"+nb.fa]||(b=[nb],this.ia[nb.ea+"-"+nb.fa]=!0),a.push(b),e=e.concat(b));this.ia=null;return a},lo:function(a,
b,c,e){if(null==b||1>b)b=1;a=[a];var f=[];this.ia={};for(this.Ae=!0;b--;){for(var g=[],h=0;h<a.length;h++){var k=a[h];void 0===k.ea&&(k={ea:k.x,fa:k.y});g=g.concat(this.Ud(k,null,!0,null,c&&e?!c:!0))}a=g;if(c&&!e){for(var l=[],h=0;h<g.length;h++)k=g[h],l=l.concat(this.Db(k.x,k.y));f.push(l)}else f.push(g)}this.ia=null;this.Ae=!1;return f},xj:function(a,b,c){var e=ALL_DIRECTONS;this.Tc?e=0==a.fa%2?ALL_DIRECTONS0:ALL_DIRECTONS1:b||(e=e.slice(0,4));a=ALL_DIRECTONS.indexOf(c);if(-1==a||3<a)return e;b=
[];var f=null;for(a=0;a<e.length;a++)f=e[a],-1<f.indexOf(c)&&b.push(f);this.Tc&&1==b.length&&b.push("UP","DOWN");return b},Go:function(a,b){if(!this.kc(a,b))return!1;var c=this.Db(a,b);return c?0==c.length:!1},Qj:function(a,b){if(a.y>b.y)return-1;if(a.y<b.y)return 1}});r.qc.create=function(a){return new r.qc(a)};window.H=r.qc.prototype;_p.gq;cc.f(_p,"tileSize",_p.Sk);_p.Qo;cc.f(_p,"mapSize",_p.Ik);delete window.H;r.Ue={};
r.Rc=function(a){if("undefined"!==typeof r.Ue[a])return r.Ue[a];cc.log("The tileMap: "+a+" hasn't been defined, pls use flax.registerTileMap to define it firstly!");return null};r.rp=function(a){r.Ue[a.id]=a};r.mb={};r.Hh=function(a){var b=null;try{(b=cc.i.localStorage.getItem(cc.k.j.zk))&&(b=JSON.parse(b))}catch(c){cc.log("Fetch UserData Error: "+c.name)}b?r.Nd(b,r.mb):a&&(r.mb=a);r.mb||(r.mb={})};r.Dp=function(){r.mb||(r.mb={});try{cc.i.localStorage.setItem(cc.k.j.zk,JSON.stringify(r.mb))}catch(a){cc.log("Save UserData Error: "+a.name)}};r.L=cc.ob.extend({hi:100,Ng:null,Ma:null,wc:null,Oa:null,Tg:"",Eb:function(a,b,c){if(this.wc&&this.Ma)return cc.log("The pool has been inited with cls: "+this.Ma),!1;this.Ng=b;this.Ma=r.Wc(b);if(null==this.Ma)return cc.log("There is no class named: "+b),!1;this.wc=a;this.Oa=[];void 0!==c&&(this.hi=c);return!0},Td:function(a,b,c){if(null==a)return cc.log("Please give me a assetID to fetch a object!"),null;var e=null;0<this.Oa.length?(e=this.Oa.shift(),e.Eg=!0,e.Kb(this.wc,a)):e=this.Ma.create?this.Ma.create(this.wc,
a):new this.Ma(this.wc,a);e.Rb=this.Tg;e.w=this.Ng;e.fc=!0;e.visible=!0;c?"undefined"===typeof c.zIndex&&(c.zIndex=0):c={zIndex:0};e.$j(c);b&&b.o(e);return e},Ai:function(a){a instanceof this.Ma?this.Oa.length<this.hi&&(a.lc&&a.lc(),a.Cl&&a.Cl(),this.Oa.push(a)):cc.log("The object to recycle is not the same type with this pool: "+this.Ma)},Fa:function(){for(var a=this.Oa.length;a--;)this.Oa[a].Fa&&this.Oa[a].Fa();this.Oa.length=0}});r.L.all={};
r.L.create=function(a,b,c){var e=new r.L;return e.Eb(a,b,c)?e:null};r.L.get=function(a,b,c){null==b&&(b="flax.Animator");null==c&&(c="");var e=a+b+c,f=r.L.all[e];null==f&&(f=r.L.create(a,b),f.Tg=c,r.L.all[e]=f);return f};r.L.Fa=function(){for(var a in r.L.all)r.L.all[a].Fa(),delete r.L.all[a]};r.cj={il:100,Sc:100,If:!0,hc:!1,je:null,ca:function(){this.Sc=this.il;this.hc=!1},Ua:function(){},ge:function(a){if(!this.If)return!1;if(this.hc)return!0;this.Sc-=a.jf;return 0>=this.Sc?(this.hc=!0,this.Sc=0,this.pi(),!0):!1},pi:function(){this.je?this.je.q():this.q()}};r.wm={Si:null,Ui:null,Zf:null,Yf:null,$f:null,gk:null,hf:-1,Qi:0,Mb:!0,og:!1,Kc:null,Sg:0,Ug:!0,ca:function(){this.Qi=this.Ui.length;this.Zf=new D.W;this.Yf=new D.W;this.$f=new D.W;this.Mb||this.Vf()},Ua:function(){C(this.Zf);C(this.Yf);C(this.$f)},aq:function(){this.Mb&&(this.Mb=!1,this.Ug?this.Vf():this.Ee(),this.Ug=!1)},fq:function(){this.Mb||(this.Mb=!0)},Vf:function(){this.og||this.Mb||(this.Sg=0,this.hf++,this.Kc=this.Ui[this.hf],this.Ee(),this.Zf.J())},Ee:function(){if(!this.og&&!this.Mb){var a=
this.vj(r.Nk(this.Kc.types));this.Yf.J(a);++this.Sg<this.Kc.count?this.Zc(function(){this.Ee()},r.cg(parseInt(this.Kc.interval[0]),parseInt(this.Kc.interval[1]))):this.hf==this.Qi-1?(this.og=!0,this.$f.J()):this.Vf()}},vj:function(a){this.Si&&r.h.ma(this.Si,a,{parent:this.gk,x:this.x,y:this.y},!0)}};r.pc=cc.ob.extend({Jd:null,jk:null,bd:null,me:null,jf:1,qk:0,speed:600,interval:0.15,count:1,Zj:5,af:0,Ti:0,Od:6,Wk:0,Xk:0,mo:null,qf:null,Hf:null,Yj:!1,kk:!1,fps:0,Io:!1});r.pc.create=function(a){var b=new r.pc;0==a.speed&&(a.speed=0.001);r.Nd(a,b);return b};
r.ue=cc.ha.extend({c:null,g:null,Lc:null,Vb:!1,sn:null,sd:null,start:function(){this.Vb||(this.Vb=!0,this.sd=r.Ya.Td(this.g.Jd),0>=this.g.Ti||1>this.g.Od?(this.jb(this.mc,this.g.interval),this.mc()):this.Uj())},end:function(){this.Vb&&(this.Vb=!1,this.cd(this.mc),this.cd(this.De))},gm:function(a){null!=a&&(r.Nd(a,this.g),this.end(),this.start())},Ho:function(){return this.Vb},Uj:function(){this.Vb&&(this.De(),this.jb(this.De,this.g.interval*this.g.Od+this.g.Ti,cc.xe))},mc:function(){if(null!=this.parent){var a=
this.parent.ua(this.A());this.Lc&&this.Lc.parent&&this.Lc.visible&&(this.rotation=r.vf(r.A(this,!0),this.Lc.center)-this.g.af-this.parent.rotation);for(var a=this.sd.gb(a),b=r.Ef(this),c=-1,e=0,f=0,g=r.pk(this.g.count);++c<this.g.count;)f=g[c],e=b+f*this.g.Zj,this.sd.Vj(e,a,this.g,this.c);this.Pj(a,e)}},De:function(){1<this.g.Od?this.jb(this.mc,this.g.interval,this.g.Od-1):this.mc()},Pj:function(a,b){if(null!=this.g.qf&&""!=this.g.qf){var c=r.h.ma(this.g.Jd,this.g.qf,{parent:this.sd},!0);c.zIndex=
999;c.ec=!0;c.n(a);c.ig(b);c.Ta(0)}}});
r.Ya=cc.Qb.extend({lg:null,b:null,Wf:null,Xf:null,Aa:null,ca:function(){this.l();this.Aa=[];null==this.lg&&(this.lg=cc.rect(0,0,cc.ga.width,cc.ga.height));this.Wf=new D.W;this.Xf=new D.W;this.eg()},Ua:function(){this.l();C(this.Wf);C(this.Xf)},Vj:function(a,b,c,e){if(null!=this.parent){c instanceof r.pc||(c=r.pc.create(c));var f=r.h.ma(c.Jd,c.jk,{parent:this},!0);f.c=e;f.g=c;e&&e.Xa&&(f.Xa=e.Xa);c.bd&&(f.bd=r.Rc(c.bd));c.fps&&(f.fps=c.fps);f.Gg=!1;if(f instanceof r.Ia){f.Fg=!0;f.sa=!0;f.ec=!0;e=f.children.length;
for(var g;e--;)g=f.children[e],c.me&&g.ad(c.me),g.ze=!0,g.rc=this,g.ye=f}else c.me&&(f.ad(c.me),f.ze=!0,f.rc=this,f.ye=f);f.play();f.Id=c.kk;f.n(b);f.ig(a);b=c.jf;b instanceof Array&&(1==b.length?b=b[0]:2<=b.length&&(b=r.cg(b[0],b[1])));f.jf=b;a=DEGREE_TO_RADIAN*(90-(a+c.af));f.uc=c.speed*Math.cos(a);f.vc=c.speed*Math.sin(a);this.Aa.push(f);return f}},Fh:function(a,b,c){void 0===b&&(b=this.Aa.indexOf(a));0>b||(!1!==c&&a.q(),this.Aa.splice(b,1))},update:function(a){var b=this.Aa.length;if(0!=b)for(var c=
null,e=null,e=null,f=!1,f=null;b--;){c=this.Aa[b];c.physicsBody?c.Gg||(c.physicsBody.an({x:c.uc/PTM_RATIO,y:c.vc/PTM_RATIO}),c.Gg=!0):(c.uc+=c.g.Wk*a,c.vc+=c.g.Xk*a,c.x+=c.uc*a,c.y+=c.vc*a,c.rotation=r.Jh(c.uc,c.vc,!0)-c.g.af);var e=r.B(c,!0),f=!1,g=!cc.tl(this.lg,e);g||(e=this.Lg(c,e,!1))&&e.length&&(f=r.A(c,!0),e=c.g.qk,0<e&&(e=cc.rect(f.x-e/2,f.y-e/2,e,e),this.Lg(c,e,!0)),f=!0);g?(this.Xf.J(c),this.Fh(c,b)):f&&(this.Wf.J(c),c.g.Yj||this.Fh(c,b))}},Lg:function(a,b,c){var e=[],f=null;a.Xa?f=a.Xa:
a.bd&&(f=a.bd.Kh(b,!0));if(!f||!f.length)return e;b=r.Ef(a);for(var g=-1;++g<f.length;)if((target=f[g])&&target.parent&&target.visible&&(!a.c||!(target==a.c||r.Mf(a.c,target)||!0===target.hc||null!=a.c.df&&target.df==a.c.df)))if(a.Fg)for(var h=a.children,k=h.length;k--;){var l=h[k];b=r.Ef(l);if(l.mainCollider.ef(target.mainCollider)){target.ge&&(target.hc=target.ge(a));!1!==target.If&&this.kh(a,b,a.ua(l.A()));target.ze&&(l=target.rc.Aa.indexOf(target),-1<l&&target.rc.Aa.splice(l,1),target.ye.q());
if(!c)return[target];e.push(target)}}else if(a.mainCollider.ef(target.mainCollider)){target.ge&&(target.hc=target.ge(a));!1!==target.If&&this.kh(a,b,a.A());target.ze&&(l=target.rc.Aa.indexOf(target),-1<l&&target.rc.Aa.splice(l,1),target.ye.q());if(!c)return[target];e.push(target)}return e},kh:function(a,b,c){if(null!=a.g.Hf&&""!=a.g.Hf){var e=r.h.ma(a.g.Jd,a.g.Hf,{parent:this},!0);e.zIndex=999;e.ec=!0;e.n(c||a.A());e.ig(b);e.Ta(0)}}});
r.Ya.create=function(a,b,c){a=r.Ya.Td(a);a.parent!=b&&(a.da(),b.o(a,c||999))};r.Ya.Td=function(a){if(r.rd[a])return r.rd[a];var b=cc.path.zb(a,".png"),b=new r.Ya(b,100);b.b=a;return r.rd[a]=b};r.rd={};r.Ya.Fa=function(){r.rd={}};r.ue.create=function(a){if(null==a)return cc.log("Please give me a param defiled like: flax.GunParam!"),null;a=r.pc.create(a);var b=new r.ue;b.g=a;b.Eb();return b};r.Xg={df:null,yc:null,Xa:null,Xj:!0,D:null,Jg:!1,Ye:!1,Ce:!1,ca:function(){this.l();this.D=[];this.yc&&this.hg(this.yc)},lc:function(){this.l();this.Oi()},Oh:function(){return this.yc},hg:function(a,b){this.yc=a;if(null!=this.parent)if(b||(b=a.Co),null==b)cc.log("Please set the gunAnchors param!");else{for(var c=-1,e=b.length,f=null,g=null;++c<e;)f=b[c],g=r.ue.create(this.yc),this.zh(f,g,this.Xj)&&(g.c=this,g.name=f,this[f]=g,this.D.push(g));this.Ye&&this.Zc(this.bk,0.1)}},Up:function(){this.Ce=!1;
this.He()},bk:function(a){this.Ce=!0;null==this.parent||null==this.D||0==this.D.length?this.Ye=!0:(0<a?this.Zc(this.He,a):this.He(),this.Jg=!0,this.Ye=!1)},An:function(a){if(a&&a.parent&&a.visible){null==this.Xa?this.Xa=[a]:-1==this.Xa.indexOf(a)&&this.Xa.push(a);for(var b=-1,c=this.D.length,e=null;++b<c;)e=this.D[b],e.Lc=a}},To:function(){},He:function(){for(var a=-1,b=this.D.length;++a<b;)this.Ce?this.D[a].start():this.D[a].mc()},Oi:function(){this.Jg=!1;if(null!=this.D&&0!=this.D.length)for(var a=
-1,b=this.D.length;++a<b;)this.D[a].end()},mq:function(a,b){var c=this.Ge(a);!isNaN(b)&&0<b?this.Zc(function(){this.Ge(c)},b):this.Ge(c)},Ge:function(a){if(0!=this.D.length){var b={},c=0,e;for(e in a)c=this.D[0].param[e]+a[e],0>=c?delete a[e]:(b[e]=-a[e],a[e]=c);c=this.D.length;for(e=null;c--;)e=this.D[c],e.gm(a);return b}},pi:function(){this.Oi();this.je?this.je.q():this.q()}};r.gd=r.nb.extend(r.Xg);r.jd=r.Ia.extend(r.Xg);r.xh(r.gd);r.xh(r.jd);window.H=r.gd.prototype;_p.Zk;
cc.f(_p,"gunParam",_p.Oh,_p.hg);window.H=r.jd.prototype;_p.Zk;cc.f(_p,"gunParam",_p.Oh,_p.hg);delete window.H;r.gd.create=function(a,b){var c=new r.gd(a,b);c.w="flax.Gunner";return c};r.jd.create=function(a,b){var c=new r.jd(a,b);c.w="flax.MCGunner";return c};r.Ag=cc.ha.extend({name:null,source:null,d:null,m:null,v:null,$g:null,fb:!1,Cc:!1,xb:0,cc:0,Ba:1,u:null,Ze:0,$e:0,U:function(a,b,c){this.l();this.source=a;this.d=b;this.$g=c;if(null==this.source)return cc.log("Please give a source!"),!1;if(null!=this.d)!0!==this.$g?(this.m=r.h.ma(this.source,this.d),this.v=r.h.ma(this.source,this.d)):(this.m=r.Dg.create(this.source,this.d),this.v=r.Dg.create(this.source,this.d));else if(this.source)if(r.$h(this.source))this.source.parent&&this.source.parent.o(this,
this.source.zIndex),this.name=this.source.name,this.parent&&(this.parent[this.name]=this),this.n(this.source.A()),this.m=r.h.Ch(this.source),this.v=r.h.Ch(this.source),this.source.q();else if(r.Nf(this.source))this.m=cc.ya.create(this.source),this.v=cc.ya.create(this.source);else return cc.log("Not support source type!"),!1;else throw"Arguments is not valid!";this.m.Ib(0,0);this.v.Ib(0,0);this.o(this.m);this.o(this.v);this.u=this.m.Nc();this.Jb(this.u)},reset:function(){this.Cc=!1;this.fb&&(this.fb=
!1,this.xb=this.cc=0,this.m.n(this.Ze,this.$e),this.v.n(this.Ze,this.$e),this.em())},bq:function(a){0==a||this.fb||(this.fb=!0,this.xb=a,this.cc=0,this.Ba=0<this.xb?1:-1,this.Dd(),this.eg())},cq:function(a){0==a||this.fb||(this.fb=!0,this.cc=a,this.xb=0,this.Ba=0<this.cc?1:-1,this.Dd(),this.eg())},ap:function(){this.fb&&!this.Cc&&(this.Cc=!0,this.em())},Ap:function(){this.fb&&this.Cc&&(this.Cc=!1,this.eg())},Dd:function(){this.m.n(this.Ze,this.$e);0!=this.xb?this.v.x=-this.Ba*(this.u.width-1):this.v.y=
-this.Ba*(this.u.height-1)},update:function(a){if(0==this.u.width*this.u.height)this.u=this.m.Nc(),0!=this.u.width*this.u.height&&(this.Jb(this.u),this.Dd());else{var b=!1;0!=this.xb?(a*=this.xb,this.m.x+=a,this.v.x+=a,a=this.u.width-this.m.x*this.Ba,0>=a&&(this.m.x+=this.Ba*a,this.v.x+=this.Ba*a,b=!0)):0!=this.cc&&(a*=this.cc,this.m.y+=a,this.v.y+=a,a=this.u.height-this.m.y*this.Ba,0>=a&&(this.m.y+=this.Ba*a,this.v.y+=this.Ba*a,b=!0));b&&(b=this.m,this.m=this.v,this.v=b,this.Dd())}},B:function(){0==
this.u.width*this.u.height&&(this.u=this.m.Nc(),0!=this.u.width*this.u.height&&this.Jb(this.u));return cc.rect(0,0,this.u.width,this.u.height)}});r.Ag.create=function(a,b,c){return new r.Ag(a,b,c)};r.ih={Ca:null,ca:function(){this.l();(this.Ca=this.xf("view").B(!0))?r.Q.addListener(null,this.Rj,"onPress",this):cc.log("If you want me scrollable, please set collider__view for me!")},Fp:function(a,b){var c=cc.ga.center,c=this.parent.gb(c),e=this.ua(a.A?a.A():a),e=this.parent.gb(e),c=cc.Gb(c,e),c=this.vh(this.x+c.x,this.y+c.y);0<b?this.El(cc.Fm.create(b,c)):this.n(c)},Rj:function(){this.Zc(function(){r.Q.addListener(null,this.Rg,"onMouseMove",this);r.Q.addListener(null,this.ph,"onUp",this)},0.01)},
Rg:function(a){a=a.Dk();this.Ca.width>=this.width&&(a.x=0);this.Ca.height>=this.height&&(a.y=0);a=this.vh(this.x+a.x,this.y+a.y);this.x=a.x;this.y=a.y},ph:function(){r.Q.removeListener(null,this.Rg,"onMouseMove");r.Q.removeListener(null,this.ph,"onUp")},vh:function(a,b){a=Math.max(this.Ca.x+this.Ca.width-this.width,a);a=Math.min(this.Ca.x,a);b=Math.max(this.Ca.y+this.Ca.height-this.height,b);b=Math.min(this.Ca.y,b);return cc.a(a,b)}};r.zg=r.nb.extend(r.ih);
r.zg.create=function(a,b){return new r.zg(a,b)};r.wg=r.Ia.extend(r.ih);r.wg.create=function(a,b){return new r.wg(a,b)};r.Dg=cc.Qb.extend({tileMap:null,cm:0,bm:0,b:null,d:null,G:0,F:0,U:function(a,b,c,e){var f=cc.path.zb(a,".png");cc.Qb.prototype.U.call(this,f);this.tileMap=new r.qc;this.Vl(a,b);c||(c=cc.ga.width);e||(e=cc.ga.height);this.Rl(c,e)},Vl:function(a,b){if(this.b!=a||this.d!=b){this.b=a;this.d=b;var c=r.h.ma(this.b,this.d).Nc();this.tileMap.Ul(c.width+this.cm,c.height+this.bm);0<this.G*this.F&&(0<this.Ck()&&this.Tj(),this.uh())}},Rl:function(a,b){if(a!=this.G||b!=this.F)this.G=a,this.F=b,this.b&&this.uh()},
Tj:function(){for(var a=null,b=this.Ck(),c=-1;++c<b;)a=this.children[c],a.Kb(this.b,this.d),this.tileMap.jg(a,a.ea,a.fa)},uh:function(){var a=this.tileMap.Nl(this.G,this.F),b,c=a[0].length;if(0<c){var e;for(b=-1;++b<c;)e=a[0][b],e.q?e.q():e.da()}c=a[1].length;if(0<c)for(b=-1;++b<c;)this.uj(a[1][b][0],a[1][b][1]);this.Jb(this.tileMap.Jk())},uj:function(a,b){var c=r.h.ma(this.b,this.d,{parent:this},!0);c.Ib(0.5,0.5);this.tileMap.jg(c,a,b,!0);return c}});EIGHT_DIRECT_VALUE=[[0,1],[0,-1],[-1,0],[1,0],[-1,1],[1,1],[1,-1],[-1,-1]];